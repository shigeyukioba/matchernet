%!PS-Adobe-3.0
%%BoundingBox: 24 24 571 818
%%Title: Enscript Output
%%For: Shigeyuki Oba
%%Creator: GNU Enscript 1.6.6
%%CreationDate: Tue Jan  8 14:41:50 2019
%%Orientation: Landscape
%%Pages: (atend)
%%DocumentMedia: A4 595 842 0 () ()
%%DocumentNeededResources: (atend)
%%EndComments
%%BeginProlog
%%BeginResource: procset Enscript-Prolog 1.6 6
%
% Procedures.
%

/_S {	% save current state
  /_s save def
} def
/_R {	% restore from saved state
  _s restore
} def

/S {	% showpage protecting gstate
  gsave
  showpage
  grestore
} bind def

/MF {	% fontname newfontname -> -	make a new encoded font
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  % insert only valid encoding vectors
  encoding_vector length 256 eq {
    newfont /Encoding encoding_vector put
  } if

  newfontname newfont definefont pop
} def

/MF_PS { % fontname newfontname -> -	make a new font preserving its enc
  /newfontname exch def
  /fontname exch def

  /fontdict fontname findfont def
  /newfont fontdict maxlength dict def

  fontdict {
    exch
    dup /FID eq {
      % skip FID pair
      pop pop
    } {
      % copy to the new font dictionary
      exch newfont 3 1 roll put
    } ifelse
  } forall

  newfont /FontName newfontname put

  newfontname newfont definefont pop
} def

/SF { % fontname width height -> -	set a new font
  /height exch def
  /width exch def

  findfont
  [width 0 0 height 0 0] makefont setfont
} def

/SUF { % fontname width height -> -	set a new user font
  /height exch def
  /width exch def

  /F-gs-user-font MF
  /F-gs-user-font width height SF
} def

/SUF_PS { % fontname width height -> -	set a new user font preserving its enc
  /height exch def
  /width exch def

  /F-gs-user-font MF_PS
  /F-gs-user-font width height SF
} def

/M {moveto} bind def
/s {show} bind def

/Box {	% x y w h -> -			define box path
  /d_h exch def /d_w exch def /d_y exch def /d_x exch def
  d_x d_y  moveto
  d_w 0 rlineto
  0 d_h rlineto
  d_w neg 0 rlineto
  closepath
} def

/bgs {	% x y height blskip gray str -> -	show string with bg color
  /str exch def
  /gray exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    gray setgray
    fill
  grestore
  x y M str s
} def

/bgcs { % x y height blskip red green blue str -> -  show string with bg color
  /str exch def
  /blue exch def
  /green exch def
  /red exch def
  /blskip exch def
  /height exch def
  /y exch def
  /x exch def

  gsave
    x y blskip sub str stringwidth pop height Box
    red green blue setrgbcolor
    fill
  grestore
  x y M str s
} def

% Highlight bars.
/highlight_bars {	% nlines lineheight output_y_margin gray -> -
  gsave
    setgray
    /ymarg exch def
    /lineheight exch def
    /nlines exch def

    % This 2 is just a magic number to sync highlight lines to text.
    0 d_header_y ymarg sub 2 sub translate

    /cw d_output_w cols div def
    /nrows d_output_h ymarg 2 mul sub lineheight div cvi def

    % for each column
    0 1 cols 1 sub {
      cw mul /xp exch def

      % for each rows
      0 1 nrows 1 sub {
        /rn exch def
        rn lineheight mul neg /yp exch def
        rn nlines idiv 2 mod 0 eq {
	  % Draw highlight bar.  4 is just a magic indentation.
	  xp 4 add yp cw 8 sub lineheight neg Box fill
	} if
      } for
    } for

  grestore
} def

% Line highlight bar.
/line_highlight {	% x y width height gray -> -
  gsave
    /gray exch def
    Box gray setgray fill
  grestore
} def

% Column separator lines.
/column_lines {
  gsave
    .1 setlinewidth
    0 d_footer_h translate
    /cw d_output_w cols div def
    1 1 cols 1 sub {
      cw mul 0 moveto
      0 d_output_h rlineto stroke
    } for
  grestore
} def

% Column borders.
/column_borders {
  gsave
    .1 setlinewidth
    0 d_footer_h moveto
    0 d_output_h rlineto
    d_output_w 0 rlineto
    0 d_output_h neg rlineto
    closepath stroke
  grestore
} def

% Do the actual underlay drawing
/draw_underlay {
  ul_style 0 eq {
    ul_str true charpath stroke
  } {
    ul_str show
  } ifelse
} def

% Underlay
/underlay {	% - -> -
  gsave
    0 d_page_h translate
    d_page_h neg d_page_w atan rotate

    ul_gray setgray
    ul_font setfont
    /dw d_page_h dup mul d_page_w dup mul add sqrt def
    ul_str stringwidth pop dw exch sub 2 div ul_h_ptsize -2 div moveto
    draw_underlay
  grestore
} def

/user_underlay {	% - -> -
  gsave
    ul_x ul_y translate
    ul_angle rotate
    ul_gray setgray
    ul_font setfont
    0 0 ul_h_ptsize 2 div sub moveto
    draw_underlay
  grestore
} def

% Page prefeed
/page_prefeed {		% bool -> -
  statusdict /prefeed known {
    statusdict exch /prefeed exch put
  } {
    pop
  } ifelse
} def

% Wrapped line markers
/wrapped_line_mark {	% x y charwith charheight type -> -
  /type exch def
  /h exch def
  /w exch def
  /y exch def
  /x exch def

  type 2 eq {
    % Black boxes (like TeX does)
    gsave
      0 setlinewidth
      x w 4 div add y M
      0 h rlineto w 2 div 0 rlineto 0 h neg rlineto
      closepath fill
    grestore
  } {
    type 3 eq {
      % Small arrows
      gsave
        .2 setlinewidth
        x w 2 div add y h 2 div add M
        w 4 div 0 rlineto
        x w 4 div add y lineto stroke

        x w 4 div add w 8 div add y h 4 div add M
        x w 4 div add y lineto
	w 4 div h 8 div rlineto stroke
      grestore
    } {
      % do nothing
    } ifelse
  } ifelse
} def

% EPSF import.

/BeginEPSF {
  /b4_Inc_state save def    		% Save state for cleanup
  /dict_count countdictstack def	% Count objects on dict stack
  /op_count count 1 sub def		% Count objects on operand stack
  userdict begin
  /showpage { } def
  0 setgray 0 setlinecap
  1 setlinewidth 0 setlinejoin
  10 setmiterlimit [ ] 0 setdash newpath
  /languagelevel where {
    pop languagelevel
    1 ne {
      false setstrokeadjust false setoverprint
    } if
  } if
} bind def

/EndEPSF {
  count op_count sub { pos } repeat	% Clean up stacks
  countdictstack dict_count sub { end } repeat
  b4_Inc_state restore
} bind def

% Check PostScript language level.
/languagelevel where {
  pop /gs_languagelevel languagelevel def
} {
  /gs_languagelevel 1 def
} ifelse
%%EndResource
%%BeginResource: procset Enscript-Encoding-88591 1.6 6
/encoding_vector [
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclam       	/quotedbl     	/numbersign   	
/dollar       	/percent      	/ampersand    	/quoteright   	
/parenleft    	/parenright   	/asterisk     	/plus         	
/comma        	/hyphen       	/period       	/slash        	
/zero         	/one          	/two          	/three        	
/four         	/five         	/six          	/seven        	
/eight        	/nine         	/colon        	/semicolon    	
/less         	/equal        	/greater      	/question     	
/at           	/A            	/B            	/C            	
/D            	/E            	/F            	/G            	
/H            	/I            	/J            	/K            	
/L            	/M            	/N            	/O            	
/P            	/Q            	/R            	/S            	
/T            	/U            	/V            	/W            	
/X            	/Y            	/Z            	/bracketleft  	
/backslash    	/bracketright 	/asciicircum  	/underscore   	
/quoteleft    	/a            	/b            	/c            	
/d            	/e            	/f            	/g            	
/h            	/i            	/j            	/k            	
/l            	/m            	/n            	/o            	
/p            	/q            	/r            	/s            	
/t            	/u            	/v            	/w            	
/x            	/y            	/z            	/braceleft    	
/bar          	/braceright   	/tilde        	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/.notdef      	/.notdef      	/.notdef      	/.notdef      	
/space        	/exclamdown   	/cent         	/sterling     	
/currency     	/yen          	/brokenbar    	/section      	
/dieresis     	/copyright    	/ordfeminine  	/guillemotleft	
/logicalnot   	/hyphen       	/registered   	/macron       	
/degree       	/plusminus    	/twosuperior  	/threesuperior	
/acute        	/mu           	/paragraph    	/bullet       	
/cedilla      	/onesuperior  	/ordmasculine 	/guillemotright	
/onequarter   	/onehalf      	/threequarters	/questiondown 	
/Agrave       	/Aacute       	/Acircumflex  	/Atilde       	
/Adieresis    	/Aring        	/AE           	/Ccedilla     	
/Egrave       	/Eacute       	/Ecircumflex  	/Edieresis    	
/Igrave       	/Iacute       	/Icircumflex  	/Idieresis    	
/Eth          	/Ntilde       	/Ograve       	/Oacute       	
/Ocircumflex  	/Otilde       	/Odieresis    	/multiply     	
/Oslash       	/Ugrave       	/Uacute       	/Ucircumflex  	
/Udieresis    	/Yacute       	/Thorn        	/germandbls   	
/agrave       	/aacute       	/acircumflex  	/atilde       	
/adieresis    	/aring        	/ae           	/ccedilla     	
/egrave       	/eacute       	/ecircumflex  	/edieresis    	
/igrave       	/iacute       	/icircumflex  	/idieresis    	
/eth          	/ntilde       	/ograve       	/oacute       	
/ocircumflex  	/otilde       	/odieresis    	/divide       	
/oslash       	/ugrave       	/uacute       	/ucircumflex  	
/udieresis    	/yacute       	/thorn        	/ydieresis    	
] def
%%EndResource
%%EndProlog
%%BeginSetup
%%IncludeResource: font Courier-Bold
%%IncludeResource: font Courier
/HFpt_w 10 def
/HFpt_h 10 def
/Courier-Bold /HF-gs-font MF
/HF /HF-gs-font findfont [HFpt_w 0 0 HFpt_h 0 0] makefont def
/Courier /F-gs-font MF
/F-gs-font 7 7 SF
/#copies 1 def
% Pagedevice definitions:
gs_languagelevel 1 gt {
  <<
    /PageSize [595 842] 
  >> setpagedevice
} if
%%BeginResource: procset Enscript-Header-enscript 1.6 6
%%IncludeResource: font Times-Bold
%%IncludeResource: font Times-Roman

% Fonts.
/Times-Bold /HeaderFont-Bold MF
/HeaderDateF /HeaderFont-Bold findfont 12 scalefont def

/Times-Roman /HeaderFont-Times MF
/HeaderHDRF /HeaderFont-Times findfont 14 scalefont def

/HeaderPageNumF /Helvetica-Bold findfont 28.8 scalefont def

/do_header {	% print enscript header
  gsave
    d_header_x d_header_y translate

    % light bar
    0 0 d_header_w d_header_h 2 div Box
    .95 setgray fill

    % dark gray boxes
    /dbw d_header_h 2 mul def	% dark box width
    /dbc .7 def			% dark box color

    % left dark box.
    0 0 dbw d_header_h Box
    dbc setgray fill

    0 setgray 
    HeaderDateF setfont
    moddatestr dup stringwidth pop dbw exch sub 2 div 
    d_header_h 2 div 2 add moveto show
    modtimestr dup stringwidth pop dbw exch sub 2 div 
    d_header_h 5 div moveto show

    % right dark box
    d_header_w dbw sub 0 dbw d_header_h Box
    dbc setgray fill

    HeaderPageNumF setfont
    1 setgray
    pagenumstr dup
    stringwidth pop dbw exch sub 2 div d_header_w dbw sub add
    d_header_h .2 mul moveto show

    % filename
    0 setgray 
    HeaderHDRF setfont
    d_header_w fname stringwidth pop sub 2 div d_header_h 8 div moveto
    fname show

    % user supplied header string.
    user_header_p {
      /h d_header_h 8 div 5 mul def

      % Implement strict enscript compatibility.
      user_header_center_str () eq user_header_right_str () eq and {
        d_header_w user_header_left_str stringwidth pop sub 2 div 
        h moveto user_header_left_str show
      } {
        dbw 5 add h moveto user_header_left_str show

        d_header_w user_header_center_str stringwidth pop sub 2 div 
        h moveto user_header_center_str show

	d_header_w dbw sub 5 sub user_header_right_str stringwidth pop
	sub h moveto user_header_right_str show
      } ifelse
    } if

  grestore
} def
%%EndResource
/d_page_w 794 def
/d_page_h 547 def
/d_header_x 0 def
/d_header_y 511 def
/d_header_w 794 def
/d_header_h 36 def
/d_footer_x 0 def
/d_footer_y 0 def
/d_footer_w 794 def
/d_footer_h 0 def
/d_output_w 794 def
/d_output_h 511 def
/cols 2 def
%%EndSetup
%%Page: (1) 1
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/matchernet.py) def
/fdir (./matchernet_py_001) def
/ftail (matchernet.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
5 501 M
(""") s
5 493 M
(matchernet.py) s
5 485 M
(=====) s
5 469 M
(This module contains basic abstract classes that the BundleNet) s
5 461 M
(architecture needs; 'Bundle' and 'Matcher'. It also includes) s
5 453 M
(their tests , function 'test_abstract_bm'.) s
5 445 M
(It imports BriCA2 \(impremented with C++\)) s
5 437 M
(https://github.com/BriCA/BriCA2) s
5 421 M
(""") s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 405 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 405 M
( brica) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 397 M
( brica ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 397 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 397 M
( Component, VirtualTimeScheduler, Timing) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 389 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 389 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 381 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 381 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 373 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 373 M
( utils ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 373 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 373 M
( print1, print2, print3, print4, _print_level) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 365 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 365 M
( state) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 357 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 357 M
( time) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 349 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 349 M
( copy) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 333 M
(#import pdb) s
/F-gs-font 7 7 SF
0 setgray
5 317 M
(zeros = utils.zeros) s
5 301 M
(_with_brica = True) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 293 M
(# A global flag to branch withBriCA2 and withoutBriCA versions) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 277 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 277 M
( Bundle\(object\):) s
5 269 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 269 M
(""") s
5 261 M
(    'Bundle' is an abstract class that defines basic propaties of Bundles in a matchernet.) s
5 245 M
(    Each bundle has) s
5 237 M
(      a state) s
5 229 M
(      a state transision dynamics) s
5 221 M
(      arbitrary number of connections to Matchers) s
5 213 M
(    """) s
/F-gs-font 7 7 SF
0 setgray
5 205 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 205 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 205 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 205 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 205 M
(\(self, name, initial_state_object\):) s
5 197 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 197 M
(""" Create a new 'Bundle' instance.) s
5 189 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 181 M
(        self.name = name) s
5 173 M
(        self.state = initial_state_object) s
5 165 M
(        self.component = Component\(self\)) s
5 157 M
(        self.component.make_out_port\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
160.4 157 M
("state") s
/F-gs-font 7 7 SF
0 setgray
189.8 157 M
(\)) s
5 141 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 141 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 141 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 141 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
72.2 141 M
(\(self, inputs\):) s
5 133 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 133 M
(""" The main routine that is called from brica.) s
5 125 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 117 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 117 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 117 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 117 M
(in) s
/F-gs-font 7 7 SF
0 setgray
80.6 117 M
( inputs: ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
118.4 117 M
(# key is one of the matcher names) s
/F-gs-font 7 7 SF
0 setgray
5 109 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 109 M
(if) s
/F-gs-font 7 7 SF
0 setgray
63.8 109 M
( inputs[key] ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
118.4 109 M
(is) s
/F-gs-font 7 7 SF
0 setgray
126.8 109 M
( ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 109 M
(not) s
/F-gs-font 7 7 SF
0 setgray
143.6 109 M
( None:) s
5 101 M
(                self.accept_feedback\(inputs[key]\)) s
5 85 M
(        self.update\(inputs\)) s
5 77 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 77 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 77 M
( {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
72.2 77 M
("state") s
/F-gs-font 7 7 SF
0 setgray
101.6 77 M
(: self.state}) s
5 61 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 61 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 61 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 61 M
(accept_feedback) s
/F-gs-font 7 7 SF
0 setgray
101.6 61 M
(\(self, fb_state\):) s
5 53 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 53 M
(""") s
5 45 M
(        Accepting the feedback state 'fb_state' from one of the matchers) s
5 37 M
(        which is linking to the current bundle.) s
5 29 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 21 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 21 M
("{} is accepting feedback") s
/F-gs-font 7 7 SF
0 setgray
177.2 21 M
(.format\(self.name\)\)) s
5 5 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 5 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 5 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 5 M
(print_state) s
/F-gs-font 7 7 SF
0 setgray
84.8 5 M
(\(self\):) s
402 501 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 501 M
(""" Print the state of the current Bundle.) s
402 493 M
(        Args: None.) s
402 485 M
(        Returns: None.) s
402 477 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
402 469 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 469 M
("State of {n}") s
/F-gs-font 7 7 SF
0 setgray
523.8 469 M
(.format\(n=self.name\)\)) s
402 461 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 461 M
("self.state.data={x}") s
/F-gs-font 7 7 SF
0 setgray
553.2 461 M
(.format\(x=self.state.data\)\)) s
402 445 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 445 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 445 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 445 M
(update) s
/F-gs-font 7 7 SF
0 setgray
460.8 445 M
(\(self, inputs\):) s
402 437 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 437 M
(""" Update the state of the current Bundle.) s
402 429 M
(        This method should be override for any subclasses.) s
402 421 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
402 413 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 413 M
("{} is updating") s
/F-gs-font 7 7 SF
0 setgray
532.2 413 M
(.format\(self.name\)\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 397 M
(class) s
/F-gs-font 7 7 SF
0 setgray
423 397 M
( Matcher\(object\):) s
402 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
418.8 389 M
(""") s
402 381 M
(    'Matcher' is an abstract class that defines basic propaties of Matchers in a matchernet.) s
402 373 M
(    Matcher is a component of matchernet.) s
402 365 M
(    It connects Bundles, calculates energy, and returns a feedback state for each Bundle.) s
402 357 M
(    Here, energy stands for a measure of contradiction among all the linking Bundles. The fe) s
402 349 M
(edback stands for a signal that is used at the corresponding Bundle; the Bundle updates its ) s
402 341 M
(state in order to decrease the energy.) s
402 333 M
(    """) s
/F-gs-font 7 7 SF
0 setgray
402 325 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 325 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 325 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 325 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
469.2 325 M
(\(self, name, *bundles\):) s
402 317 M
(        self.name = name) s
402 309 M
(        self.component = Component\(self\)) s
402 301 M
(        self.results = {}) s
402 293 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 293 M
(for) s
/F-gs-font 7 7 SF
0 setgray
448.2 293 M
( b ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
460.8 293 M
(in) s
/F-gs-font 7 7 SF
0 setgray
469.2 293 M
( bundles:) s
402 285 M
(            self.component.make_in_port\(b.name\)) s
402 277 M
(            self.component.make_out_port\(b.name\)) s
402 269 M
(            b.component.make_in_port\(name\)) s
402 261 M
(            brica.connect\(b.component, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
565.8 261 M
("state") s
/F-gs-font 7 7 SF
0 setgray
595.2 261 M
(, self.component, b.name\)) s
402 253 M
(            brica.connect\(self.component, b.name, b.component, name\)) s
402 245 M
(            print4\( ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
486 245 M
("{}") s
/F-gs-font 7 7 SF
0 setgray
502.8 245 M
(.format\(b.state.data\)\)) s
402 237 M
(            self.results[b.name] = copy.deepcopy\(b.state\)) s
402 229 M
(        self.state = state.StatePlain\(1\) ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
574.2 229 M
(# Own state of the current matcher) s
/F-gs-font 7 7 SF
0 setgray
402 213 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 213 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 213 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 213 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
469.2 213 M
(\(self, inputs\):) s
402 205 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 205 M
(""") s
402 197 M
(        The main routine that is called from brica.) s
402 189 M
(        The input variable  'inputs'  is a python dictionary object that brings all the curr) s
402 181 M
(ent states of bundles.) s
402 173 M
(        Ex.) s
402 157 M
(          inputs = {"Bundle0", st0, "Bundle1", st1}) s
402 141 M
(        The output variable 'results' is a python dictionary object which brings all the fee) s
402 133 M
(dback states to the corresponding bundles.) s
402 125 M
(        Ex.) s
402 109 M
(          results = {"Bundle0", fbst0, "Bundle1", fbst1}) s
402 93 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
402 85 M
(        mu = {}) s
402 77 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 77 M
(for) s
/F-gs-font 7 7 SF
0 setgray
448.2 77 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
469.2 77 M
(in) s
/F-gs-font 7 7 SF
0 setgray
477.6 77 M
( inputs:) s
402 69 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
452.4 69 M
(if) s
/F-gs-font 7 7 SF
0 setgray
460.8 69 M
( inputs[key] ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
515.4 69 M
(is) s
/F-gs-font 7 7 SF
0 setgray
523.8 69 M
( ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
528 69 M
(not) s
/F-gs-font 7 7 SF
0 setgray
540.6 69 M
( None:) s
402 61 M
(                self.accept_bundle_state\(inputs[key]\)) s
402 53 M
(        self.update\(inputs\)) s
402 45 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 45 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 45 M
( self.results) s
402 29 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 29 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 29 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 29 M
(accept_bundle_state) s
/F-gs-font 7 7 SF
0 setgray
515.4 29 M
(\(self, st\):) s
402 21 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 21 M
("Matcher {} is accepting_bundle_state") s
/F-gs-font 7 7 SF
0 setgray
624.6 21 M
(.format\(self.name\)\)) s
402 5 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 5 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 5 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 5 M
(update) s
/F-gs-font 7 7 SF
0 setgray
460.8 5 M
(\(self, inputs\):) s
_R
S
%%Page: (2) 2
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 2 def
/fname (./matchernet_py_001/matchernet.py) def
/fdir (./matchernet_py_001) def
/ftail (matchernet.py) def
% User defined strings:
/pagenumstr (2) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
5 501 M
(        self.print_state\(\)) s
5 485 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 485 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 485 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 485 M
(print_state) s
/F-gs-font 7 7 SF
0 setgray
84.8 485 M
(\(self\):) s
5 477 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 477 M
('''Prints the state of the self.''') s
/F-gs-font 7 7 SF
0 setgray
5 469 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 469 M
("State of {n}") s
/F-gs-font 7 7 SF
0 setgray
126.8 469 M
(.format\(n=self.name\)\)) s
5 461 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 461 M
("self.state.data={x}") s
/F-gs-font 7 7 SF
0 setgray
156.2 461 M
(.format\(x=self.state.data\)\)) s
5 453 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 453 M
("self.results={x}") s
/F-gs-font 7 7 SF
0 setgray
143.6 453 M
(.format\(x=self.results\)\)) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 429 M
(# ====================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(#   Test functions) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 413 M
(# ====================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 397 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 397 M
(test_abstract_bm) s
/F-gs-font 7 7 SF
0 setgray
89 397 M
(\(\):) s
5 389 M
(    st = state.StateMuSigma\(4\)) s
5 381 M
(    b0   = Bundle\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 381 M
("Bundle0") s
/F-gs-font 7 7 SF
0 setgray
118.4 381 M
(,st\)) s
5 373 M
(    b1   = Bundle\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 373 M
("Bundle1") s
/F-gs-font 7 7 SF
0 setgray
118.4 373 M
(,st\)) s
5 365 M
(    b2   = Bundle\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 365 M
("Bundle2") s
/F-gs-font 7 7 SF
0 setgray
118.4 365 M
(,st\)) s
5 349 M
(    m01 = Matcher\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 349 M
("Matcher01") s
/F-gs-font 7 7 SF
0 setgray
126.8 349 M
(,b0,b1\)) s
5 341 M
(    m02 = Matcher\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 341 M
("Matcher02") s
/F-gs-font 7 7 SF
0 setgray
126.8 341 M
(,b0,b2\)) s
5 333 M
(    m12 = Matcher\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 333 M
("Matcher12") s
/F-gs-font 7 7 SF
0 setgray
126.8 333 M
(,b1,b2\)) s
5 317 M
(    s = VirtualTimeScheduler\(\)) s
5 301 M
(    bt = Timing\(0, 1, 1\)) s
5 293 M
(    bm = Timing\(1, 1, 1\)) s
5 277 M
(    s.add_component\( b0.component, bt\)) s
5 269 M
(    s.add_component\( b1.component, bt\)) s
5 261 M
(    s.add_component\( b2.component, bt\)) s
5 245 M
(    s.add_component\( m01.component, bm\)) s
5 237 M
(    s.add_component\( m02.component, bm\)) s
5 229 M
(    s.add_component\( m12.component, bm\)) s
5 213 M
(    s.step\(\)) s
5 205 M
(    s.step\(\)) s
5 197 M
(    s.step\(\)) s
5 189 M
(    s.step\(\)) s
5 173 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 173 M
(return) s
/F-gs-font 7 7 SF
0 setgray
47 173 M
( s) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 157 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 157 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 157 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 157 M
(:) s
5 149 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 149 M
(import) s
/F-gs-font 7 7 SF
0 setgray
47 149 M
( time) s
5 141 M
(    n=20) s
5 133 M
(    start = time.time\(\)) s
5 125 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
21.8 125 M
(# _print_level=1 # silent mode) s
/F-gs-font 7 7 SF
0 setgray
5 117 M
(    utils._print_level=3 ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
110 117 M
(# noisy mode) s
/F-gs-font 7 7 SF
0 setgray
5 109 M
(    s = test_abstract_bm\(\)) s
5 101 M
(    elapsed_time = time.time\(\) - start) s
5 93 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 93 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 93 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
47 93 M
("abstract -- elapsed_time:{0}") s
/F-gs-font 7 7 SF
0 setgray
173 93 M
(.format\(elapsed_time\) + ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
273.8 93 M
("[sec]") s
/F-gs-font 7 7 SF
0 setgray
303.2 93 M
(\)) s
_R
S
%%Page: (1) 3
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/observer.py) def
/fdir (./matchernet_py_001) def
/ftail (observer.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 501 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 493 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 485 M
( utils ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 485 M
( print1, print2, print3, print4, print5) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 477 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 477 M
( state) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 469 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 469 M
( matchernet) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 445 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 445 M
( Observer\(matchernet.Bundle\):) s
5 437 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 437 M
('''Observer works as a Bundle that provides vector data at each time step of the Matcher) s
5 429 M
(Net simulation.) s
5 413 M
(    Usage:) s
5 405 M
(    Construct an observer by) s
5 389 M
(    >> o1 = Observer\("Observer1", buffer\)) s
5 373 M
(    where buffer is an numpy.ndarray of shape \(length, dim\).) s
5 365 M
(    Then, call it for each step by) s
5 349 M
(    >> result = o1\( dummy_input \)) s
5 333 M
(    and you get the vector data of the current time-stamp) s
5 317 M
(     results.state.data["mu"]) s
5 301 M
(    with corresponding observation error covariance matrix) s
5 285 M
(     results.state.data["Sigma"].) s
5 269 M
(    Note:) s
5 261 M
(    When the vector data in buffer included  NaN  entries, they are regarded as missing entr) s
5 253 M
(ies and the Observer outpus a zero vector  mu  with covariance matrix  cov  of large eigen v) s
5 245 M
(alues. \(See the function  missing_handler001\(\)  for a default setting to construct the corre) s
5 237 M
(sponding output. \) ) s
5 229 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 221 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 221 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 221 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 221 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 221 M
(\(self, name, buff\):) s
5 213 M
(        self.name = name) s
5 205 M
(        self.buffer = buff) s
5 197 M
(        self.counter = -1) s
5 189 M
(        self.length = buff.shape[0]) s
5 181 M
(        self.dim = buff.shape[1]) s
5 173 M
(        self.state = state.StateMuSigma\(self.dim\)) s
5 165 M
(        super\(Observer,self\).__init__\(self.name, self.state\)) s
5 157 M
(        self.obs_noise_covariance = 1000 * np.eye\(self.dim,dtype=np.float32\)) s
5 149 M
(        self.missing_handler = missing_handler001) s
5 141 M
(            ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
55.4 141 M
(# default setting of missing value handler function) s
/F-gs-font 7 7 SF
0 setgray
5 133 M
(        self.set_results\(\)) s
5 125 M
(            ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
55.4 125 M
(# set the first value with large obs_noise_covariance) s
/F-gs-font 7 7 SF
0 setgray
5 117 M
(            ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
55.4 117 M
(# for an initial value) s
/F-gs-font 7 7 SF
0 setgray
5 101 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 101 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 101 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 101 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
72.2 101 M
(\(self, inputs\):) s
5 93 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 93 M
(""" The main routine that is called from brica.) s
5 85 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 77 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 77 M
(#for key in inputs: # key is one of the matcher names) s
/F-gs-font 7 7 SF
0 setgray
5 69 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 69 M
(#    if inputs[key] is not None:) s
/F-gs-font 7 7 SF
0 setgray
5 61 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 61 M
(#        self.accept_feedback\(inputs[key]\) # Doing nothing) s
/F-gs-font 7 7 SF
0 setgray
5 45 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 45 M
("=== In Bundle {}") s
/F-gs-font 7 7 SF
0 setgray
143.6 45 M
(.format\(self.name\)\)) s
5 37 M
(        self.count_up\(\)) s
5 29 M
(        self.set_results\(\)) s
5 21 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 21 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 21 M
( self.results) s
5 5 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 5 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 5 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 5 M
(count_up) s
/F-gs-font 7 7 SF
0 setgray
72.2 5 M
(\(self\):) s
402 501 M
(        self.counter = \(self.counter + 1\) % self.length) s
402 485 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 485 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 485 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 485 M
(set_buffer) s
/F-gs-font 7 7 SF
0 setgray
477.6 485 M
(\(self, buff\):) s
402 477 M
(        self.buffer = buff) s
402 469 M
(        self.counter = -1) s
402 461 M
(        self.length = buff.shape[0]) s
402 453 M
(        self.dim = buff.shape[1]) s
402 437 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 437 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 437 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 437 M
(get_buffer) s
/F-gs-font 7 7 SF
0 setgray
477.6 437 M
(\(self\):) s
402 429 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 429 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 429 M
( self.buffer) s
402 413 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 413 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 413 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 413 M
(get_state) s
/F-gs-font 7 7 SF
0 setgray
473.4 413 M
(\(self\):) s
402 405 M
(        b = self.get_buffer\(\)) s
402 397 M
(        z = b[self.counter].copy\(\)) s
402 389 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 389 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 389 M
( [z] ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
481.8 389 M
(# returning [[1,2,3,...]] rather than [1,2,3,...]) s
/F-gs-font 7 7 SF
0 setgray
402 373 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 373 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 373 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 373 M
(set_results) s
/F-gs-font 7 7 SF
0 setgray
481.8 373 M
(\(self\):) s
402 365 M
(        q = self.get_state\(\)) s
402 357 M
(        mu, Sigma = self.missing_handler\( np.array\(q,np.float32\), self.obs_noise_covariance ) s
402 349 M
(\)) s
402 341 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 341 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
519.6 341 M
(]=mu) s
402 333 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 333 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
532.2 333 M
(]=Sigma) s
402 325 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 325 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
553.2 325 M
(]=self.counter) s
402 317 M
(        self.results = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 317 M
("state") s
/F-gs-font 7 7 SF
0 setgray
532.2 317 M
(: self.state}) s
402 309 M
(          ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
444 309 M
(# === Note: We may regard  "time_stamp"  as a real time rather than a counter in a) s
402 301 M
( future version.) s
/F-gs-font 7 7 SF
0 setgray
402 285 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 285 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 285 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 285 M
(print_state) s
/F-gs-font 7 7 SF
0 setgray
481.8 285 M
(\(self\):) s
402 277 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 277 M
('''Prints the state of the self.''') s
/F-gs-font 7 7 SF
0 setgray
402 269 M
(        pt = self.ports_to_matchers[0]) s
402 261 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 261 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 261 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 261 M
("self.results[]={c}") s
/F-gs-font 7 7 SF
0 setgray
544.8 261 M
(.format\(c=self.results[pt]\)\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 245 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 245 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 245 M
(missing_handler001) s
/F-gs-font 7 7 SF
0 setgray
494.4 245 M
(\(mu,Sigma\):) s
402 237 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
418.8 237 M
(''' A missing value handler function.) s
402 229 M
(    It receives a vector data  mu  with a default covariance matrix  Sigma, find NaN in the ) s
402 221 M
(vector  mu, and outputs a modified set of a vector  mu  and a covariance  cov.) s
402 213 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
402 205 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 205 M
(if) s
/F-gs-font 7 7 SF
0 setgray
427.2 205 M
( np.any\(np.isnan\(mu\)\):) s
402 197 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 197 M
("Missing!") s
/F-gs-font 7 7 SF
0 setgray
507 197 M
(\)) s
402 189 M
(        cov = Sigma * 1000) s
402 181 M
(        mu = np.zeros\(mu.shape\)) s
402 173 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 173 M
(else) s
/F-gs-font 7 7 SF
0 setgray
435.6 173 M
(:) s
402 165 M
(        cov = Sigma) s
402 157 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 157 M
(return) s
/F-gs-font 7 7 SF
0 setgray
444 157 M
( mu, cov) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 141 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 141 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 141 M
(test_missing_handler001) s
/F-gs-font 7 7 SF
0 setgray
515.4 141 M
(\(\):) s
402 133 M
(    mu = np.array\([1,2,np.nan]\)) s
402 125 M
(    Sigma = np.eye\(3\)) s
402 117 M
(    mu1, Sigma1 = missing_handler001\(mu, Sigma\)) s
402 109 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 109 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 109 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 109 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
460.8 109 M
(,mu\)) s
402 101 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 101 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 101 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 101 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
473.4 101 M
(,Sigma\)) s
402 93 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 93 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 93 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 93 M
("mu1") s
/F-gs-font 7 7 SF
0 setgray
465 93 M
(,mu1\)) s
402 85 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 85 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 85 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 85 M
("Sigma1") s
/F-gs-font 7 7 SF
0 setgray
477.6 85 M
(,Sigma1\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 53 M
(class) s
/F-gs-font 7 7 SF
0 setgray
423 53 M
( ObserverMultiple\(Observer\):) s
402 45 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
418.8 45 M
('''A bundle that provides sequencial data''') s
/F-gs-font 7 7 SF
0 setgray
402 37 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 37 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 37 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 37 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
469.2 37 M
(\(self, name, buff, mul\):) s
402 29 M
(        self.name = name) s
402 21 M
(        self.mul = mul) s
402 13 M
(        super\(\).__init__\(self.name, buff\)) s
_R
S
%%Page: (2) 4
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 2 def
/fname (./matchernet_py_001/observer.py) def
/fdir (./matchernet_py_001) def
/ftail (observer.py) def
% User defined strings:
/pagenumstr (2) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
5 501 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 501 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 501 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 501 M
(get_state) s
/F-gs-font 7 7 SF
0 setgray
76.4 501 M
(\(self\):) s
5 493 M
(        b = self.get_buffer\(\)) s
5 485 M
(        z = b[self.counter].copy\(\)) s
5 477 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 477 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 477 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 477 M
(in) s
/F-gs-font 7 7 SF
0 setgray
72.2 477 M
( range\(1,self.mul\):) s
5 469 M
(            j = \(self.counter + i \) % self.length) s
5 461 M
(            z = np.concatenate\( \(z, b[j].copy\(\)\) \)) s
5 453 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 453 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
122.6 453 M
(] = z) s
5 445 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 445 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 445 M
( z) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 429 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 429 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 429 M
(test_observer) s
/F-gs-font 7 7 SF
0 setgray
76.4 429 M
(\(\):) s
5 421 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 421 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 421 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
47 421 M
("=== Unit test of class Observer ===") s
/F-gs-font 7 7 SF
0 setgray
202.4 421 M
(\)) s
5 413 M
(    dim = 4) s
5 405 M
(    buffersize = 5) s
5 397 M
(    x = np.zeros\(\(buffersize,dim\),dtype=np.float32\)) s
5 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 389 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 389 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 389 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 389 M
( range\(buffersize\):) s
5 381 M
(        x[i][0]=i) s
5 365 M
(    b0 = Observer\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 365 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
97.4 365 M
(,x\)) s
5 357 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 357 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 357 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 357 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 357 M
( range\(buffersize*2\):) s
5 349 M
(        b0.count_up\(\)) s
5 341 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 341 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 341 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 341 M
("get_state\(\)=") s
/F-gs-font 7 7 SF
0 setgray
122.6 341 M
(,b0.get_state\(\) \)) s
5 325 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 325 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 325 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
47 325 M
("=== Unit test of class Observer without BriCA ===") s
/F-gs-font 7 7 SF
0 setgray
261.2 325 M
(\)) s
5 317 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 317 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 317 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 317 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 317 M
( range\(buffersize*2\):) s
5 309 M
(        b0\(b0.state\)) s
5 301 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 301 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 301 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 301 M
("b0.results[state].data[mu]=") s
/F-gs-font 7 7 SF
0 setgray
185.6 301 M
(,b0.results[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
236 301 M
("state") s
/F-gs-font 7 7 SF
0 setgray
265.4 301 M
(].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
294.8 301 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
311.6 301 M
(]\)) s
5 285 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 285 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 285 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
47 285 M
("=== Unit test of class ObserverMultiple ===") s
/F-gs-font 7 7 SF
0 setgray
236 285 M
(\)) s
5 277 M
(    mul = 3) s
5 269 M
(    b0 = ObserverMultiple\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
114.2 269 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
131 269 M
(,x,mul\)) s
5 261 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 261 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 261 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 261 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 261 M
( range\(buffersize*2\):) s
5 253 M
(        b0.count_up\(\)) s
5 245 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 245 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 245 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 245 M
("get_state\(\)=") s
/F-gs-font 7 7 SF
0 setgray
122.6 245 M
(,b0.get_state\(\) \)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 229 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 229 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 229 M
(test_ObserverWithMissing) s
/F-gs-font 7 7 SF
0 setgray
122.6 229 M
(\(\):) s
5 221 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 221 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 221 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
47 221 M
("=== Unit test of class ObserverWithMissing ===") s
/F-gs-font 7 7 SF
0 setgray
248.6 221 M
(\)) s
5 213 M
(    dim = 4) s
5 205 M
(    buffersize = 2) s
5 197 M
(    x = np.zeros\(\(buffersize,dim\),dtype=np.float32\)) s
5 189 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 189 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 189 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 189 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 189 M
( range\(buffersize\):) s
5 181 M
(        x[i][0]=i) s
5 165 M
(    x[1][2] = np.nan) s
5 157 M
(    b0 = ObserverWithMissing\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
126.8 157 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
143.6 157 M
(,x\)) s
5 149 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 149 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 149 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 149 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 149 M
( range\(buffersize*2\):) s
5 141 M
(        b0.count_up\(\)) s
5 133 M
(        b0.set_results\(\)) s
5 125 M
(        print4\(b0.state.data\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 101 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 101 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 101 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 101 M
(:) s
5 93 M
(    utils._print_level = 5) s
5 85 M
(    test_observer\(\)) s
5 77 M
(    test_missing_handler001\(\)) s
5 69 M
(    test_ObserverWithMissing\(\)) s
_R
S
%%Page: (1) 5
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/ekf.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 501 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 493 M
( matchernet) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 485 M
( matchernet ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
97.4 485 M
( Bundle, Matcher) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 477 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 477 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 469 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 469 M
( utils ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 469 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 469 M
( print1, print2, print3, print4, print5) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 461 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 461 M
( state) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 453 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 453 M
( pdb) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 445 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 445 M
( fn) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 429 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(#  BundleEKFContinuousTime) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 413 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 397 M
( BundleEKFContinuousTime\(Bundle\):) s
5 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 389 M
('''Class BundleEKFContinuousTime is a Bundle part of an extended Kalman filter \(EKF\) mod) s
5 381 M
(el implemented as the BundleNet.) s
5 365 M
(    See matchernet.py for general concept of the BundleNet, especially the general relations) s
5 357 M
(hip between the "Bundle" and the "Matcher".) s
5 341 M
(    This class "BundleEKFContinuousTime" manages an internal state  x  and its dynamics mode) s
5 333 M
(l  f.) s
5 325 M
(    The dynamics is defined as a probabilistic differential equation,) s
5 317 M
(       dx/dt = f\(x\) + Q dw,) s
5 309 M
(    where  x  is an  n  dimensional state vector variable,) s
5 301 M
(           f  determines the intrinsic non-linear dynamics) s
5 293 M
(                 by a map from n-dim to n-dim,) s
5 285 M
(           dw is a Wiener process.) s
5 277 M
(    This dynamics is locally linearlized and temporarily descritized) s
5 269 M
(    as followings,) s
5 261 M
(       x\(t+dt\) = dot\( x\(t\), F \) + w\(t\), w\(t\) ~ N\(0, dt*Q \)) s
5 253 M
(    where  F = exp\( dt*A \)  is the linear coefficient matrix) s
5 245 M
(    that is defined with the Jacobian matrix  A = df/dx.) s
5 229 M
(    This class stores the internal state as a temporal estimation of) s
5 221 M
(    the posterior probability density function) s
5 213 M
(       q\(x\) = N\( mu, Sigma \)) s
5 205 M
(    that is parameterized as) s
5 197 M
(           mu = self.state["mu"]  \(1,n\)-np.array) s
5 189 M
(    and) s
5 181 M
(           Sigma = self.state["Sigma"]  \(n,n\)-np.array.) s
5 165 M
(    Dynamics function  f  is stored as a function instance) s
5 157 M
(        self.f) s
5 149 M
(    of a class  Fn   which is defined in  fn.py .) s
5 125 M
(    In EKF algorithm, the BundleEKFContinuousTime updates) s
5 117 M
(       posterior  q\(x\)  through following steps.) s
5 101 M
(       1. Updates posterior  q\(x\)  according to the intrinsic dynamics) s
5 93 M
(       with an arbitrary time step  dt.) s
5 85 M
(       It is implemented in the method  self.step_dynamics\(\).) s
5 69 M
(       2. Updates posterior  q\(x\)  in order to increase objective functions) s
5 61 M
(       that are defined in Matchers.) s
5 53 M
(       It is implemented in the method  self.accept_feedback\(\).) s
5 29 M
(    One Bundle can connect to multiple Matchers. Thus, the difference signals) s
5 21 M
(    from all the connected Matchers are applied simultaneously.) s
5 5 M
(    The dynamics function  f  is fixed at the initialized value.) s
402 501 M
(    See an extented class) s
402 493 M
(        BundleEKFContinuousTimeTrainable \(to be implemented soon\)) s
402 485 M
(    for a similar class with trainable dynamics function.) s
402 469 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
402 461 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 461 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 461 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 461 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
469.2 461 M
(\(self, name, n\):) s
402 453 M
(        self.n = n ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
481.8 453 M
(# Dimsnsionarity of the state variable) s
/F-gs-font 7 7 SF
0 setgray
402 445 M
(        self.name = name) s
402 437 M
(        self.state = state.StateMuSigma\(n\)) s
402 429 M
(        self._initialize_control_params\(\)) s
402 421 M
(        self._initialize_state\(n\)) s
402 413 M
(        self.f = fn.LinearFn\(n,n\)) s
402 405 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
435.6 405 M
(#self.bw = matchernet.bundleWeight\(numSteps\)) s
/F-gs-font 7 7 SF
0 setgray
402 397 M
(        super\(BundleEKFContinuousTime, self\).__init__\(self.name, self.state\)) s
402 389 M
(        self._first_call_of_state_record = True) s
402 373 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 373 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 373 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 373 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
469.2 373 M
(\(self, inputs\):) s
402 365 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 365 M
(""" The main routine that is called from brica.) s
402 357 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
402 349 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 349 M
("=== In Bundle {}") s
/F-gs-font 7 7 SF
0 setgray
540.6 349 M
(.format\(self.name\)\)) s
402 341 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 341 M
(for) s
/F-gs-font 7 7 SF
0 setgray
448.2 341 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
469.2 341 M
(in) s
/F-gs-font 7 7 SF
0 setgray
477.6 341 M
( inputs: ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
515.4 341 M
(# key is one of the matcher names) s
/F-gs-font 7 7 SF
0 setgray
402 333 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
452.4 333 M
(if) s
/F-gs-font 7 7 SF
0 setgray
460.8 333 M
( inputs[key] ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
515.4 333 M
(is) s
/F-gs-font 7 7 SF
0 setgray
523.8 333 M
( ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
528 333 M
(not) s
/F-gs-font 7 7 SF
0 setgray
540.6 333 M
( None:) s
402 325 M
(                print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
498.6 325 M
("==   accepting feedback from {}") s
/F-gs-font 7 7 SF
0 setgray
637.2 325 M
(.format\(key\)\)) s
402 317 M
(                self.accept_feedback\(inputs[key]\)) s
402 309 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 309 M
("1: mu={}") s
/F-gs-font 7 7 SF
0 setgray
507 309 M
(.format\(self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
607.8 309 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
624.6 309 M
(]\)\)) s
402 301 M
(        self.step_dynamics\(self.dt\)) s
402 293 M
(        self._countup\(\)) s
402 285 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 285 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
532.2 285 M
(] = utils.regularize_cov_matrix\(self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
733.8 285 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
763.2 285 M
(]\)) s
402 277 M
(        self._state_record\(\)) s
402 269 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 269 M
("1: mu={}") s
/F-gs-font 7 7 SF
0 setgray
507 269 M
(.format\(self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
607.8 269 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
624.6 269 M
(]\)\)) s
402 253 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 253 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 253 M
( {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
469.2 253 M
("state") s
/F-gs-font 7 7 SF
0 setgray
498.6 253 M
(: self.state}) s
402 237 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 237 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 237 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 237 M
(_state_record) s
/F-gs-font 7 7 SF
0 setgray
490.2 237 M
(\(self\):) s
402 229 M
(        mu = np.array\(self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
561.6 229 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
578.4 229 M
(],dtype=np.float32\)) s
402 221 M
(        sigma = np.array\([np.diag\(self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
612 221 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
641.4 221 M
(]\)],dtype=np.float32\)) s
402 213 M
(        ts = np.array\([self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
565.8 213 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
616.2 213 M
(]],dtype=np.float32\)) s
402 205 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 205 M
(if) s
/F-gs-font 7 7 SF
0 setgray
444 205 M
( self._first_call_of_state_record ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
586.8 205 M
(is) s
/F-gs-font 7 7 SF
0 setgray
595.2 205 M
( True:) s
402 197 M
(            self.record = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
515.4 197 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
532.2 197 M
(:mu, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
553.2 197 M
("diagSigma") s
/F-gs-font 7 7 SF
0 setgray
599.4 197 M
(:sigma, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
633 197 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
683.4 197 M
(:ts}) s
402 189 M
(            self._first_call_of_state_record = False) s
402 181 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 181 M
(else) s
/F-gs-font 7 7 SF
0 setgray
452.4 181 M
(:) s
402 173 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 173 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
519.6 173 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
654 173 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
670.8 173 M
(],mu\),axis=0\)) s
402 165 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 165 M
("diagSigma") s
/F-gs-font 7 7 SF
0 setgray
549 165 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
683.4 165 M
("diagSigma") s
/F-gs-font 7 7 SF
0 setgray
729.6 165 M
(],sigma\),axis=) s
402 157 M
(0\)) s
402 149 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 149 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
553.2 149 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
687.6 149 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
738 149 M
(],ts\),axis=0) s
402 141 M
(\)) s
402 125 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 125 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 125 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 125 M
(_initialize_control_params) s
/F-gs-font 7 7 SF
0 setgray
544.8 125 M
(\(self\):) s
402 117 M
(        self.id = 0) s
402 109 M
(        self.dt = 0.01) s
402 101 M
(        self.callcount = 0) s
402 93 M
(        self.is_optimizer_ready = False) s
402 85 M
(        self.lr = 0.0001 ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
507 85 M
(# Leaning rate for dynamics  f) s
/F-gs-font 7 7 SF
0 setgray
402 69 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 69 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 69 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 69 M
(_countup) s
/F-gs-font 7 7 SF
0 setgray
469.2 69 M
(\(self\):) s
402 61 M
(        self.id = self.id+1) s
402 53 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 53 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
553.2 53 M
(] = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
637.2 53 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
687.6 53 M
(] + self.dt) s
402 45 M
(        self.callcount = self.callcount+1) s
402 29 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 29 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 29 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 29 M
(_initialize_state) s
/F-gs-font 7 7 SF
0 setgray
507 29 M
(\(self,n\):) s
402 21 M
(        mu = utils.zeros\(\(1,n\)\)) s
402 13 M
(        Sigma = 1.0 * np.identity\(self.n,dtype=np.float32\)) s
402 5 M
(        Q = 1.0 * np.identity\(self.n\)) s
_R
S
%%Page: (2) 6
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 2 def
/fname (./matchernet_py_001/ekf.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf.py) def
% User defined strings:
/pagenumstr (2) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
5 501 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 501 M
("id") s
/F-gs-font 7 7 SF
0 setgray
122.6 501 M
(] = self.id) s
5 493 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 493 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
122.6 493 M
(] = mu) s
5 485 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 485 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
135.2 485 M
(] = Sigma) s
5 477 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 477 M
("Q") s
/F-gs-font 7 7 SF
0 setgray
118.4 477 M
(] = Q) s
5 469 M
(        self._first_call_of_state_record = 1) s
5 453 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 453 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 453 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 453 M
(accept_feedback) s
/F-gs-font 7 7 SF
0 setgray
101.6 453 M
(\(self,fbst\):) s
5 445 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 445 M
(""") s
5 437 M
(        Overriding matchernet.Bundle.accept_feedback\(\)) s
5 429 M
(        This method updates the state of the current Bundle with accepting a feedback, fbst,) s
5 421 M
( from each Matcher linking from the current Bundle, according to the following update rule.) s
5 405 M
(            mu <-- mu + dmu,) s
5 397 M
(            Sigma <-- Sigma - dSigma,) s
5 381 M
(        where  mu  and  Sigma  stands for the probabilistic state of the current bundle  q\(x) s
5 373 M
(\) = N\( mu, Sigma \),) s
5 365 M
(        and  dmu  and  dSigma  stands for the feedback state coming from the corresponding M) s
5 357 M
(atcher.) s
5 349 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 341 M
(        dmu = fbst.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 341 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
122.6 341 M
(]) s
5 333 M
(        dSigma = fbst.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
118.4 333 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
147.8 333 M
(]) s
5 325 M
(        mu = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
126.8 325 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
143.6 325 M
(]) s
5 317 M
(        Sigma = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
139.4 317 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
168.8 317 M
(]) s
5 309 M
(        Q = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
122.6 309 M
("Q") s
/F-gs-font 7 7 SF
0 setgray
135.2 309 M
(]) s
5 293 M
(        print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 293 M
("dmu={}") s
/F-gs-font 7 7 SF
0 setgray
101.6 293 M
(.format\(dmu\)\)) s
5 285 M
(        print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 285 M
("dSigma={}") s
/F-gs-font 7 7 SF
0 setgray
114.2 285 M
(.format\(dSigma\)\)) s
5 277 M
(        weight = 1.0) s
5 261 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 261 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
122.6 261 M
(] = \(mu + weight*dmu\).astype\(np.float32\)) s
5 253 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 253 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
135.2 253 M
(] = \(Sigma - weight*dSigma\).astype\(np.float32\)) s
5 245 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 245 M
(#self.Q = \(1-weight*self.lr\) * Q + weight*self.lr * np.dot\(dmu.T,dmu\)) s
/F-gs-font 7 7 SF
0 setgray
5 229 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 229 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 229 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 229 M
(step_dynamics) s
/F-gs-font 7 7 SF
0 setgray
93.2 229 M
(\(self, dt\):) s
5 221 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 221 M
(""") s
5 213 M
(        This method updates  self.state  using the dynamics model,) s
5 197 M
(            dx/dt  =  f\(x\) + Q dw.) s
5 181 M
(        In order to \(1\) temporally discretization, \(2\) locally liniarization, and \(3\) consid) s
5 173 M
(eration of probabilistic state, the actual update rule becomes the following manner) s
5 157 M
(            mu <-- mu + dot\( x\(t\), F \)) s
5 149 M
(            Sigma <-- F' * Sigma * F + dt * Q) s
5 133 M
(        where  F = exp\( dt*A \)  is a linear coefficient matrix calculated with the Jacobian ) s
5 125 M
(matrix  A = \(df/dx\).) s
5 117 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 109 M
(        mu = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
126.8 109 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
143.6 109 M
(]) s
5 101 M
(        Sigma = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
139.4 101 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
168.8 101 M
(]) s
5 93 M
(        Q = self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
122.6 93 M
("Q") s
/F-gs-font 7 7 SF
0 setgray
135.2 93 M
(]) s
5 85 M
(        A = self.f.x\( mu \)) s
5 77 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 77 M
(# Note:  mu.shape = \(1,n\), A.shape = \(n,n\)) s
/F-gs-font 7 7 SF
0 setgray
5 69 M
(        matrix_F = utils.calc_matrix_F\(A, dt\)) s
5 61 M
(        mu = np.dot\( mu, matrix_F \)) s
5 53 M
(        Sigma = dt * Q + np.dot\( np.dot\( matrix_F.T,  Sigma\), matrix_F \)) s
5 45 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 45 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
122.6 45 M
(] = mu) s
5 37 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 37 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
135.2 37 M
(] = Sigma) s
5 29 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 29 M
(# ["time_stamp"] is updated in the method self._countup\(\)) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 13 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 5 M
(#  Matcher_EKF) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
402 501 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 485 M
(class) s
/F-gs-font 7 7 SF
0 setgray
423 485 M
( MatcherEKF\(Matcher\):) s
402 477 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
418.8 477 M
('''Class MatcherEKF is a Matcher part of an extended Kalman filter \(EKF\) model implement) s
402 469 M
(ed as the BundleNet.) s
402 453 M
(    See matchernet.py for general concept of the BundleNet, especially the general relations) s
402 445 M
(hip between the "Bundle" and the "Matcher".) s
402 429 M
(    In short, the followings are what MatcherEKF does in the BundleNet.) s
402 421 M
(     \(1\) Defines a link between two bundles  b0  and  b1) s
402 413 M
(     \(2\) Receives current states of bundles  b0  and  b1, which are probability density func) s
402 405 M
(tion  q\(x0\) = N\( mu0, Sigma0 \)  and  q\(x1\) = N\( mu1, Sigma1 \)) s
402 397 M
(     \(3\) Evaluates error  E  \(or log likelihood  lnL  \)  defined as a function of the curren) s
402 389 M
(t bundle states.) s
402 381 M
(     \(4\) Calculates the derivatives of  E  w.r.t. the states,) s
402 373 M
(         dmu0 = d E / d mu0, dSigma0 = d E / d Sigma0) s
402 365 M
(         dmu1 = d E / d mu1, dSigma1 = d E / d Sigma1) s
402 357 M
(     \(5\) Returns the derivatives as "feedback state" from the current Matcher to the corresp) s
402 349 M
(onding Bundles.) s
402 333 M
(    The MatcherEKF defines a error \(or contradiction\) between the two bundles as) s
402 317 M
(       E =  z S^{-1} z') s
402 301 M
(    and corresponding log-likelihood function as) s
402 285 M
(       lnl = - \(1/2\) z S^{-1} z' - \(1/2\) ln det 2 pi S) s
402 269 M
(    where) s
402 253 M
(       z = g0\( mu0 \) - g1\( mu1 \)) s
402 237 M
(    stands for the error \(or contradiction\) between the states of the two Bundles.  g0\(\)  an) s
402 229 M
(d  g1\(\)  are arbitrary user-defined functions. The user can set  g0  and  g1  identity funct) s
402 221 M
(ion  mu0 = g0\(mu0\)  and  mu1 = g1\(mu1\)  for the simplest case.) s
402 213 M
(    State variables of the bundles are denoted as normal distributions) s
402 197 M
(       q\(x0\)  ==  N\( mu0,  Sigma0 \)) s
402 189 M
(       q\(x1\)  ==  N\( mu1,  Sigma1 \)) s
402 173 M
(    Then, the total variance  S  of the current matcher is defined as) s
402 157 M
(       S = C0 Sigma0 C0' + C1 Sigma1 C1') s
402 141 M
(    where  C0 = \(dg0/dx\)  and  C1 = \(dg1/dx\)  are Jacobian matrices. Note that C0 and C1 are) s
402 133 M
( identity matrices and  S = Sigma0 + Sigma1  holds in the simplest case.) s
402 125 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
402 117 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 117 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 117 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 117 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
469.2 117 M
(\(self,name,b0,b1\): ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
549 117 M
(# b0 and b1 are the Bundles to be linked to the current M) s
402 109 M
(atcher) s
/F-gs-font 7 7 SF
0 setgray
402 101 M
(        self.name = name) s
402 93 M
(        super\(MatcherEKF, self\).__init__\(name, b0,b1\)) s
402 85 M
(        self.b0name = b0.name) s
402 77 M
(        self.b1name = b1.name) s
402 69 M
(        self.n0 = b0.state.n ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
523.8 69 M
(# dim. of B0) s
/F-gs-font 7 7 SF
0 setgray
402 61 M
(        self.n1 = b1.state.n ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
523.8 61 M
(# dim. of B1) s
/F-gs-font 7 7 SF
0 setgray
402 53 M
(        self._first_call_of_state_record = 1) s
402 45 M
(        self._initialize_model\(\)) s
402 37 M
(        self.ts0_recent = -1 ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
523.8 37 M
(# the most recent value of the time_stamp of b0) s
/F-gs-font 7 7 SF
0 setgray
402 29 M
(        self.ts1_recent = -1 ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
523.8 29 M
(# that of b1) s
/F-gs-font 7 7 SF
0 setgray
402 13 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 13 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 13 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 13 M
(_initialize_model) s
/F-gs-font 7 7 SF
0 setgray
507 13 M
(\(self\):) s
402 5 M
(        self.n = self.n0      ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
528 5 M
(# dim. of g0\(x0\), g1\(x1\)) s
_R
S
%%Page: (3) 7
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 3 def
/fname (./matchernet_py_001/ekf.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf.py) def
/Courier-Oblique 7 7 SUF
% User defined strings:
/pagenumstr (3) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
0.698039 0.133333 0.133333 setrgbcolor
/F-gs-font 7 7 SF
0 setgray
5 501 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 501 M
(# self.g0 is an identity function as a default observation model) s
/F-gs-font 7 7 SF
0 setgray
5 493 M
(        C0 = np.eye\(self.n0,dtype=np.float32\)) s
5 485 M
(        self.g0 = fn.LinearFn\(dim_in=self.n0,dim_out=self.n\)) s
5 477 M
(        self.g0.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
101.6 477 M
("A") s
/F-gs-font 7 7 SF
0 setgray
114.2 477 M
(]=C0) s
5 469 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 469 M
(# self.g1 is also an identity function) s
/F-gs-font 7 7 SF
0 setgray
5 461 M
(        C1 = np.eye\(self.n1,dtype=np.float32\)) s
5 453 M
(        self.g1 = fn.LinearFn\(dim_in=self.n1,dim_out=self.n\)) s
5 445 M
(        self.g1.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
101.6 445 M
("A") s
/F-gs-font 7 7 SF
0 setgray
114.2 445 M
(]=C1) s
5 437 M
(        self.lnL = 0) s
5 429 M
(        self.err2 = 0) s
5 421 M
(        self.id0 = 0) s
5 413 M
(        self.id1 = 0) s
5 397 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 397 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 397 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 397 M
(print_state) s
/F-gs-font 7 7 SF
0 setgray
84.8 397 M
(\(self\):) s
5 389 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 389 M
("== Printing the matcher's state") s
/F-gs-font 7 7 SF
0 setgray
206.6 389 M
(\)) s
5 381 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 381 M
("name={}") s
/F-gs-font 7 7 SF
0 setgray
105.8 381 M
(.format\(self.name\)\)) s
5 373 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 373 M
("b0={}, b1={}") s
/F-gs-font 7 7 SF
0 setgray
126.8 373 M
(.format\(self.b0name,self.b1name\)\)) s
5 365 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 365 M
("n0={}, n1={}, n={}") s
/F-gs-font 7 7 SF
0 setgray
152 365 M
(.format\(self.n0, self.n1, self.n\)\)) s
5 349 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 349 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 349 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 349 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
72.2 349 M
(\(self, inputs\):) s
5 341 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 341 M
(""") s
5 333 M
(        The main routine that is called from brica.) s
5 325 M
(        The input variable  'inputs'  is a python dictionary object that brings all the curr) s
5 317 M
(ent states of bundles.) s
5 309 M
(        Ex.) s
5 293 M
(          inputs = {"Bundle0", st0, "Bundle1", st1}) s
5 277 M
(        The output variable 'results' is a python dictionary object which brings all the fee) s
5 269 M
(dback states to the corresponding bundles.) s
5 261 M
(        Ex.) s
5 245 M
(          results = {"Bundle0", fbst0, "Bundle1", fbst1}) s
5 229 M
(        """) s
/F-gs-font 7 7 SF
0 setgray
5 221 M
(        self.update\(inputs\)) s
5 213 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 213 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 213 M
( self.results) s
5 197 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 197 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 197 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 197 M
(_state_record) s
/F-gs-font 7 7 SF
0 setgray
93.2 197 M
(\(self\):) s
5 189 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 189 M
('''Storing records of current MatcherEKF''') s
/F-gs-font 7 7 SF
0 setgray
5 181 M
(        b0 = self.b0state) s
5 173 M
(        b1 = self.b1state) s
5 165 M
(        fbst0 = self.results[self.b0name]) s
5 157 M
(        fbst1 = self.results[self.b1name]) s
5 149 M
(         ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
42.8 149 M
(# feedback from the current Matcher to the Bundle b1) s
/F-gs-font 7 7 SF
0 setgray
5 141 M
(        mu0 = np.array\( b0.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
139.4 141 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
156.2 141 M
(] \)) s
5 133 M
(        sigma0 = np.array\([np.diag\(b0.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
185.6 133 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
215 133 M
(]\)],dtype=np.float32\)) s
5 125 M
(        mu1 = np.array\( b1.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
139.4 125 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
156.2 125 M
(] \)) s
5 117 M
(        sigma1 = np.array\([np.diag\(b1.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
185.6 117 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
215 117 M
(]\)],dtype=np.float32\)) s
5 109 M
(        dmu1 = np.array\( fbst1.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
156.2 109 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
173 109 M
(] \)) s
5 101 M
(        dsigma1 = np.array\([np.diag\(fbst1.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
202.4 101 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
231.8 101 M
(]\)],dtype=np.float32\)) s
5 93 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 93 M
(if) s
/F-gs-font 7 7 SF
0 setgray
47 93 M
( self._first_call_of_state_record == 1:) s
5 85 M
(            self.record = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
118.4 85 M
("mu0") s
/F-gs-font 7 7 SF
0 setgray
139.4 85 M
(:mu0, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
164.6 85 M
("diagSigma0") s
/F-gs-font 7 7 SF
0 setgray
215 85 M
(:sigma0,) s
5 77 M
(             ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
59.6 77 M
("mu1") s
/F-gs-font 7 7 SF
0 setgray
80.6 77 M
(:mu1, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 77 M
("diagSigma1") s
/F-gs-font 7 7 SF
0 setgray
156.2 77 M
(:sigma1,) s
5 69 M
(             ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
59.6 69 M
("dmu1") s
/F-gs-font 7 7 SF
0 setgray
84.8 69 M
(:dmu1, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
114.2 69 M
("diagDSigma1") s
/F-gs-font 7 7 SF
0 setgray
168.8 69 M
(:dsigma1}) s
5 61 M
(            self._first_call_of_state_record = 0) s
5 53 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 53 M
(else) s
/F-gs-font 7 7 SF
0 setgray
55.4 53 M
(:) s
5 45 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 45 M
("mu0") s
/F-gs-font 7 7 SF
0 setgray
126.8 45 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
261.2 45 M
("mu0") s
/F-gs-font 7 7 SF
0 setgray
282.2 45 M
(],mu0\),axis=0\)) s
5 37 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 37 M
("diagSigma0") s
/F-gs-font 7 7 SF
0 setgray
156.2 37 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
290.6 37 M
("diagSigma0") s
/F-gs-font 7 7 SF
0 setgray
341 37 M
(],sigma0\),ax) s
5 29 M
(is=0\)) s
5 21 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 21 M
("mu1") s
/F-gs-font 7 7 SF
0 setgray
126.8 21 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
261.2 21 M
("mu1") s
/F-gs-font 7 7 SF
0 setgray
282.2 21 M
(],mu1\),axis=0\)) s
5 13 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 13 M
("diagSigma1") s
/F-gs-font 7 7 SF
0 setgray
156.2 13 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
290.6 13 M
("diagSigma1") s
/F-gs-font 7 7 SF
0 setgray
341 13 M
(],sigma1\),ax) s
5 5 M
(is=0\)) s
402 501 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 501 M
("dmu1") s
/F-gs-font 7 7 SF
0 setgray
528 501 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
662.4 501 M
("dmu1") s
/F-gs-font 7 7 SF
0 setgray
687.6 501 M
(],dmu1\),axis=0\)) s
402 493 M
(            self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 493 M
("diagDSigma1") s
/F-gs-font 7 7 SF
0 setgray
557.4 493 M
(] = np.concatenate\(\(self.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
691.8 493 M
("diagDSigma1") s
/F-gs-font 7 7 SF
0 setgray
746.4 493 M
(],dsigma1\)) s
402 485 M
(,axis=0\)) s
402 469 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 469 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 469 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 469 M
(forward) s
/F-gs-font 7 7 SF
0 setgray
465 469 M
(\(self\):) s
402 461 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 461 M
(''' Main method that evaluates the error and derivatives.) s
402 453 M
(           z = g0\(mu0\) - g1\(mu1\)) s
402 445 M
(           C0 = \(d g0/ d mu0\)   <-- Jacobian) s
402 437 M
(           C1 = \(d g1/ d mu1\)   <-- Jacobian) s
402 429 M
(           S = C0 Sigma0 C0' + C1 Sigma1 C1') s
402 421 M
(           err2 = z S^{-1} z') s
402 413 M
(           lnL = - \(1/2\) err2 - \(1/2\) log det\( 2*pi*S \)) s
402 405 M
(           K0 = Sigma0 C0' S^{-1}) s
402 397 M
(           K1 = Sigma1 C1' S^{-1}) s
402 389 M
(           dmu0 <-- K0 z,  dSigma0 <-- K0 C0 dSigma0) s
402 381 M
(           dmu1 <-- K1 z,  dSigma1 <-- K1 C1 dSigma1) s
402 365 M
(        Note) s
402 357 M
(           When bundle  b0  is a Observer that provides sequencial data, the user may consid) s
402 349 M
(er the simplest setting with the identity function  g0\(\)  and a fixed noise matrix  Sigma0. ) s
402 341 M
(In this case, the observer omits the corresponding feedback signal  dmu0  and  dSigma0, and ) s
402 333 M
(the total covariance  S  becomes that of a standard EKF,) s
402 325 M
(               S = R + C1 Sigma1 C1) s
402 317 M
(           where  R = Sigma0.) s
402 309 M
(           In other words, user may provide a fixed noise matrix  Sigma0 = R  in the observe) s
402 301 M
(r in order to set the observation noise model.) s
402 293 M
(           Missing observation can be described as temporally setting of large diagonal elem) s
402 285 M
(ents of  Sigma0.) s
402 277 M
(        ''') s
/F-gs-font 7 7 SF
0 setgray
402 269 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 269 M
("Matcher_EKF forward") s
/F-gs-font 7 7 SF
0 setgray
553.2 269 M
(\)) s
402 261 M
(        self.lnL_t = 0) s
402 253 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
435.6 253 M
(#self.R = self.Sigma0 + self.Sigma1) s
/F-gs-font 7 7 SF
0 setgray
402 245 M
(        print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 245 M
("mu0_shape={}") s
/F-gs-font 7 7 SF
0 setgray
523.8 245 M
(.format\(self.mu0.shape\)\)) s
402 237 M
(        print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 237 M
("mu1_shape={}") s
/F-gs-font 7 7 SF
0 setgray
523.8 237 M
(.format\(self.mu1.shape\)\)) s
402 229 M
(        z = self.g0.value\(self.mu0\) - self.g1.value\(self.mu1\)) s
402 221 M
(        C0 = self.g0.x\(self.mu0\)) s
402 213 M
(        C1 = self.g1.x\(self.mu1\)) s
402 205 M
(        S = np.dot\( np.dot\(C0.T, self.Sigma0\), C0\) + np.dot\( np.dot\(C1.T, self.Sigma1\), C1\)) s
402 197 M
(        SI = np.matrix\(S\).I) s
402 189 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 189 M
("z={z}, S={S}") s
/F-gs-font 7 7 SF
0 setgray
523.8 189 M
(.format\(z=z,S=S\)\)) s
402 181 M
(        dum_sign, slogdet = np.linalg.slogdet\( S \)) s
402 173 M
(        self.lnL_t -= np.dot\( np.dot\( z, SI\), z.T \) / 2.0) s
402 165 M
(        self.err2 += np.dot\(z,z.T\)[0,0]) s
402 157 M
(        self.lnL_t -= slogdet /2.0) s
402 149 M
(        K0 = np.dot\( np.dot\( self.Sigma0, C0\), SI\)) s
402 141 M
(        K1 = np.dot\( np.dot\( self.Sigma1, C1\), SI\)) s
402 133 M
(        self.dmu0 = -np.dot\( z, K0.T \)   ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
574.2 133 M
(#### HERE it is fixed! ####) s
/F-gs-font 7 7 SF
0 setgray
402 125 M
(        self.dmu1 = np.dot\( z, K1.T \)) s
402 117 M
(        self.dSigma0 = np.dot\( K0, np.dot\( C0.T, self.Sigma0\) \)) s
402 109 M
(        self.dSigma1 = np.dot\( K1, np.dot\( C1.T, self.Sigma1\) \)) s
402 101 M
(        self.lnL += self.lnL_t[0,0]) s
402 93 M
(        print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 93 M
("lnL_t = {lnLt}, lnL = {lnL}") s
/F-gs-font 7 7 SF
0 setgray
586.8 93 M
(.format\(lnLt=self.lnL_t,lnL=self.lnL\)\)) s
402 77 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 77 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 77 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 77 M
(backward) s
/F-gs-font 7 7 SF
0 setgray
469.2 77 M
(\(self\):) s
402 69 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 69 M
(''' Updates the observation models) s
402 61 M
(              self.g0 and self.g1) s
402 53 M
(        if they are variables.) s
402 45 M
(        \(to be implemented soon\)) s
402 37 M
(        ''') s
/F-gs-font 7 7 SF
0 setgray
402 29 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 29 M
("{} backward") s
/F-gs-font 7 7 SF
0 setgray
519.6 29 M
(.format\(self.name\)\)) s
402 13 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 13 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 13 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 13 M
(update) s
/F-gs-font 7 7 SF
0 setgray
460.8 13 M
(\(self, inputs\):) s
402 5 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
435.6 5 M
(''' method self.update\(\)) s
_R
S
%%Page: (4) 8
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 4 def
/fname (./matchernet_py_001/ekf.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf.py) def
/Courier-Bold 7 7 SUF
% User defined strings:
/pagenumstr (4) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
0.737255 0.560784 0.560784 setrgbcolor
5 501 M
(         is called from self.__call__\(\)) s
5 493 M
(        ''') s
/F-gs-font 7 7 SF
0 setgray
5 485 M
(        self.b0state = inputs[self.b0name]) s
5 477 M
(        d0 = self.b0state.data) s
5 469 M
(        self.b1state = inputs[self.b1name]) s
5 461 M
(        d1 = self.b1state.data) s
5 453 M
(        self.mu0 = d0[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 453 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
114.2 453 M
(]) s
5 445 M
(        self.Sigma0 = d0[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
110 445 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
139.4 445 M
(]) s
5 437 M
(        self.ts0 = d0[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 437 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
147.8 437 M
(]) s
5 429 M
(        self.mu1 = d1[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 429 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
114.2 429 M
(]) s
5 421 M
(        self.Sigma1 = d1[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
110 421 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
139.4 421 M
(]) s
5 413 M
(        self.ts1 = d1[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 413 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
147.8 413 M
(]) s
5 397 M
(        print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 397 M
("=== In Matcher {}") s
/F-gs-font 7 7 SF
0 setgray
147.8 397 M
(.format\(self.name\)\)) s
5 389 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 389 M
("5: mu0={}") s
/F-gs-font 7 7 SF
0 setgray
114.2 389 M
(.format\(self.mu0\)\)) s
5 381 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 381 M
("5: Sigma0={}") s
/F-gs-font 7 7 SF
0 setgray
126.8 381 M
(.format\(self.Sigma0\)\)) s
5 373 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 373 M
("5: mu1={}") s
/F-gs-font 7 7 SF
0 setgray
114.2 373 M
(.format\(self.mu1\)\)) s
5 365 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 365 M
("5: Sigma1={}") s
/F-gs-font 7 7 SF
0 setgray
126.8 365 M
(.format\(self.Sigma1\)\)) s
5 349 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 349 M
(if) s
/F-gs-font 7 7 SF
0 setgray
47 349 M
( self.ts0 == self.ts0_recent:) s
5 341 M
(            print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
84.8 341 M
("  b0.state is not updated") s
/F-gs-font 7 7 SF
0 setgray
198.2 341 M
(\)) s
5 333 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 333 M
(if) s
/F-gs-font 7 7 SF
0 setgray
47 333 M
( self.ts1 == self.ts1_recent:) s
5 325 M
(            print2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
84.8 325 M
("  b1.state is not updated") s
/F-gs-font 7 7 SF
0 setgray
198.2 325 M
(\)) s
5 317 M
(        self.ts0_recent = self.ts0) s
5 309 M
(        self.ts1_recent = self.ts1) s
5 293 M
(        self.forward\(\)) s
5 285 M
(        self.backward\(\)) s
5 269 M
(        self.results[self.b0name].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 269 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
185.6 269 M
(] = self.dmu0.astype\(np.float32\)) s
5 261 M
(        self.results[self.b0name].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 261 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
198.2 261 M
(] = self.dSigma0.astype\(np.float32\)) s
5 253 M
(        self.results[self.b1name].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 253 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
185.6 253 M
(] = self.dmu1.astype\(np.float32\)) s
5 245 M
(        self.results[self.b1name].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 245 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
198.2 245 M
(] = self.dSigma1.astype\(np.float32\)) s
5 229 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 229 M
("5: dmu0={}") s
/F-gs-font 7 7 SF
0 setgray
118.4 229 M
(.format\(self.dmu0\)\)) s
5 221 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 221 M
("5: dSigma0={}") s
/F-gs-font 7 7 SF
0 setgray
131 221 M
(.format\(self.dSigma0\)\)) s
5 205 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 205 M
("5: dmu1={}") s
/F-gs-font 7 7 SF
0 setgray
118.4 205 M
(.format\(self.dmu1\)\)) s
5 197 M
(        print5\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 197 M
("5: dSigma1={}") s
/F-gs-font 7 7 SF
0 setgray
131 197 M
(.format\(self.dSigma1\)\)) s
5 181 M
(        self._state_record\(\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 165 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 165 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 165 M
(test_EKF) s
/F-gs-font 7 7 SF
0 setgray
55.4 165 M
(\(\):) s
5 157 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 157 M
(""") s
5 149 M
(    Here is the least test of consistency of the classes) s
5 141 M
(     'BundleEKFContinuousTime' and 'MatcherEKF'.) s
5 133 M
(    See 'matchernet_ekf_test.py' for richer and fancyer tests and demonstrations of EKF.) s
5 125 M
(    """) s
/F-gs-font 7 7 SF
0 setgray
5 117 M
(    b0 = BundleEKFContinuousTime\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
143.6 117 M
("Bundle0") s
/F-gs-font 7 7 SF
0 setgray
181.4 117 M
(,4\)) s
5 109 M
(    b1 = BundleEKFContinuousTime\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
143.6 109 M
("Bundle1") s
/F-gs-font 7 7 SF
0 setgray
181.4 109 M
(,4\)) s
5 101 M
(    m = MatcherEKF\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
84.8 101 M
("Matcher01") s
/F-gs-font 7 7 SF
0 setgray
131 101 M
(,b0, b1\)) s
5 93 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 93 M
(return) s
/F-gs-font 7 7 SF
0 setgray
47 93 M
( m, b0, b1) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 77 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 77 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 77 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 77 M
(:) s
5 69 M
(    m, b0, b1 = test_EKF\(\)) s
_R
S
%%Page: (1) 9
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/state_space_model_2d.py) def
/fdir (./matchernet_py_001) def
/ftail (state_space_model_2d.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 501 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 493 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 485 M
( fn) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 477 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 477 M
( matplotlib.pyplot as plt) s
5 461 M
(printDebug = True) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 453 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 453 M
( StateSpaceModel2Dim\(object\):) s
5 445 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 445 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 445 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 445 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 445 M
(\(self,dt\):) s
5 437 M
(        n=2) s
5 429 M
(        self.n=n) s
5 421 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 421 M
(#self.w=N\(0,sigma\)) s
/F-gs-font 7 7 SF
0 setgray
5 413 M
(        self.A=np.array\([[-0.1,2],[-2,-0.1]],dtype=np.float32\)) s
5 405 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 405 M
(#self.f=utils.MyLinear\(n,n,self.A\);) s
/F-gs-font 7 7 SF
0 setgray
5 397 M
(        self.F=utils.calc_matrix_F\(self.A,dt\)) s
5 389 M
(        self.g=fn.LinearFn\(n,n\)) s
5 381 M
(        self.g.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 381 M
("A") s
/F-gs-font 7 7 SF
0 setgray
110 381 M
(] = self.A) s
5 373 M
(        self.sigma_w=0) s
5 365 M
(        self.sigma_z=0.1) s
5 357 M
(        self.x=np.array\([0,1],dtype=np.float32\)) s
5 349 M
(        self.y=utils.zeros\(\(1,2\)\)) s
5 333 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 333 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 333 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 333 M
(simulation) s
/F-gs-font 7 7 SF
0 setgray
80.6 333 M
(\(self,dt, numSteps\):) s
5 325 M
(        x0=self.x) s
5 317 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 317 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 317 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 317 M
(in) s
/F-gs-font 7 7 SF
0 setgray
72.2 317 M
( range\(numSteps\):) s
5 309 M
(            \(x, y\)=self.onestep\(dt\)) s
5 301 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 301 M
(if) s
/F-gs-font 7 7 SF
0 setgray
63.8 301 M
( i==0:) s
5 293 M
(                self.xrec = x) s
5 285 M
(                self.yrec = y) s
5 277 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 277 M
(else) s
/F-gs-font 7 7 SF
0 setgray
72.2 277 M
(:) s
5 269 M
(                self.xrec=np.concatenate\(\(self.xrec,x\),axis=0\)) s
5 261 M
(                self.yrec=np.concatenate\(\(self.yrec,y\),axis=0\)) s
5 245 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 245 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 245 M
( \(self.xrec, self.yrec\)) s
5 229 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 229 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 229 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 229 M
(onestep) s
/F-gs-font 7 7 SF
0 setgray
68 229 M
(\(self,dt\):) s
5 221 M
(        F=self.F) s
5 213 M
(        self.w = self.sigma_w * np.random.standard_normal\(size=\(1,self.n\)\)) s
5 205 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 205 M
(#pdb.set_trace\(\)) s
/F-gs-font 7 7 SF
0 setgray
5 197 M
(        self.x = np.dot\( self.x, F \)+self.w) s
5 189 M
(        self.z = self.sigma_z * np.random.standard_normal\(size=\(1,self.n\)\)) s
5 181 M
(        self.y = self.x+self.z) s
5 173 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 173 M
(#Sigma = dt * Q + np.dot\( np.dot\( F.T,  Sigma\), F \)) s
/F-gs-font 7 7 SF
0 setgray
5 165 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 165 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 165 M
( \(self.x, self.y\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 141 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 141 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 141 M
(test_state_space_model_2Dim) s
/F-gs-font 7 7 SF
0 setgray
135.2 141 M
(\(numSteps\):) s
5 133 M
(    dt = 0.1) s
5 125 M
(    ssm = StateSpaceModel2Dim\(dt\)) s
5 117 M
(    xrec, yrec = ssm.simulation\(dt, numSteps\)) s
5 109 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 109 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 109 M
( printDebug ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
80.6 109 M
(is) s
/F-gs-font 7 7 SF
0 setgray
89 109 M
( True:) s
5 101 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 101 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 101 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 101 M
('x: ') s
/F-gs-font 7 7 SF
0 setgray
84.8 101 M
(,xrec\)) s
5 93 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 93 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 93 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 93 M
('y: ') s
/F-gs-font 7 7 SF
0 setgray
84.8 93 M
(,yrec\)) s
5 77 M
(    plt.subplot\(211\)) s
5 69 M
(    timestamp=np.array\(range\(0,numSteps\)\)) s
5 61 M
(    plt.plot\(timestamp,xrec[:,0]\)) s
5 53 M
(    plt.scatter\(timestamp,yrec[:,0],s=1\)) s
5 45 M
(    plt.title\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 45 M
("test_state_space_model_2Dim") s
/F-gs-font 7 7 SF
0 setgray
185.6 45 M
(\)) s
5 37 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 37 M
("X") s
/F-gs-font 7 7 SF
0 setgray
80.6 37 M
(\)) s
5 29 M
(    plt.subplot\(212\)) s
5 21 M
(    plt.plot\(timestamp,xrec[:,1]\)) s
5 13 M
(    plt.scatter\(timestamp,yrec[:,1],s=1\)) s
5 5 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 5 M
("Y") s
/F-gs-font 7 7 SF
0 setgray
80.6 5 M
(\)) s
402 501 M
(    plt.show\(\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 485 M
(if) s
/F-gs-font 7 7 SF
0 setgray
410.4 485 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 485 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
507 485 M
(:) s
402 469 M
(    test_state_space_model_2Dim\(500\)) s
_R
S
%%Page: (1) 10
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/ekf_test.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf_test.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 501 M
( ekf) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 493 M
( ekf ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
42.8 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
68 493 M
( BundleEKFContinuousTime, MatcherEKF) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 485 M
( observer) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 477 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 477 M
( matplotlib.pyplot as plt) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 469 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 469 M
( matplotlib as mpl) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 461 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 461 M
( state_space_model_2d) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 453 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 453 M
( state_space_model_2d ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
114.2 453 M
(import) s
/F-gs-font 7 7 SF
0 setgray
139.4 453 M
( StateSpaceModel2Dim) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 445 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 445 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 437 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 437 M
( fn) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 429 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 429 M
( brica) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 421 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 421 M
( brica ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 421 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 421 M
( Component, VirtualTimeScheduler, Timing) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 413 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 413 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 405 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 405 M
( utils ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 405 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 405 M
( print1, print2, print3, print4, print_flush) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 397 M
( sys) s
5 381 M
(_with_brica = True) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 365 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 357 M
(#  Visualization functions for the matchernet_ekf.py) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 349 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 341 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 341 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 341 M
(visualize_bundle_rec) s
/F-gs-font 7 7 SF
0 setgray
105.8 341 M
(\(b, yrec=None\):) s
5 325 M
(    murec = b.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
93.2 325 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
110 325 M
(]) s
5 317 M
(    sigmarec = b.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 317 M
("diagSigma") s
/F-gs-font 7 7 SF
0 setgray
152 317 M
(]) s
5 309 M
(    time_stamp = b.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
114.2 309 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
164.6 309 M
(]) s
5 301 M
(    numofTimesteps = murec.shape[0]) s
5 293 M
(    timestamp = np.array\(range\(0,numofTimesteps\)\)) s
5 277 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 277 M
("murec.shape={}") s
/F-gs-font 7 7 SF
0 setgray
118.4 277 M
(.format\(murec.shape\)\)) s
5 269 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 269 M
("murec.dtype={}") s
/F-gs-font 7 7 SF
0 setgray
118.4 269 M
(.format\(murec.dtype\)\)) s
5 261 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 261 M
("sigmarec.shape={}") s
/F-gs-font 7 7 SF
0 setgray
131 261 M
(.format\(sigmarec.shape\)\)) s
5 253 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 253 M
("sigmarec.dtype={}") s
/F-gs-font 7 7 SF
0 setgray
131 253 M
(.format\(sigmarec.dtype\)\)) s
5 245 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 245 M
("timestamp.shape={}") s
/F-gs-font 7 7 SF
0 setgray
135.2 245 M
(.format\(timestamp.shape\)\)) s
5 237 M
(    print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 237 M
("murec={}") s
/F-gs-font 7 7 SF
0 setgray
93.2 237 M
(.format\(murec\)\)) s
5 229 M
(    print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 229 M
("sigmarec={}") s
/F-gs-font 7 7 SF
0 setgray
105.8 229 M
(.format\(sigmarec\)\)) s
5 221 M
(    print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 221 M
("timestamp={}") s
/F-gs-font 7 7 SF
0 setgray
110 221 M
(.format\(timestamp\)\)) s
5 205 M
(    plt.subplot\(221\)) s
5 197 M
(    plt.plot\(murec[:,0],murec[:,1]\)) s
5 189 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 189 M
("X") s
/F-gs-font 7 7 SF
0 setgray
80.6 189 M
(\)) s
5 181 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 181 M
("Y") s
/F-gs-font 7 7 SF
0 setgray
80.6 181 M
(\)) s
5 173 M
(    plt.title\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 173 M
("Trajectory") s
/F-gs-font 7 7 SF
0 setgray
114.2 173 M
(\)) s
5 149 M
(    plt.subplot\(222\)) s
5 141 M
(    yd = murec[:,0]-sigmarec[:,0]) s
5 133 M
(    yu = murec[:,0]+sigmarec[:,0]) s
5 125 M
(    print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 125 M
("sigmarec[:,0]={}") s
/F-gs-font 7 7 SF
0 setgray
126.8 125 M
(.format\(sigmarec[:,0]\)\)) s
5 117 M
(    print4\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 117 M
("murec[:,0]={}") s
/F-gs-font 7 7 SF
0 setgray
114.2 117 M
(.format\(murec[:,0]\)\)) s
5 109 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 109 M
("murec[:,0].shape={}") s
/F-gs-font 7 7 SF
0 setgray
139.4 109 M
(.format\(murec[:,0].shape\)\)) s
5 101 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 101 M
("sigmarec[:,0].shape={}") s
/F-gs-font 7 7 SF
0 setgray
152 101 M
(.format\(sigmarec[:,0].shape\)\)) s
5 93 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 93 M
("murec[:,1].shape={}") s
/F-gs-font 7 7 SF
0 setgray
139.4 93 M
(.format\(murec[:,1].shape\)\)) s
5 85 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 85 M
("sigmarec[:,1].shape={}") s
/F-gs-font 7 7 SF
0 setgray
152 85 M
(.format\(sigmarec[:,1].shape\)\)) s
5 77 M
(    print3\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 77 M
("yu.shape={}") s
/F-gs-font 7 7 SF
0 setgray
105.8 77 M
(.format\(yu.shape\)\)) s
5 69 M
(    plt.fill_between\(time_stamp,yd,yu,facecolor=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
206.6 69 M
('y') s
/F-gs-font 7 7 SF
0 setgray
219.2 69 M
(, alpha=0.5\)) s
5 61 M
(    plt.plot\(time_stamp,murec[:,0]\)) s
5 53 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 53 M
("X") s
/F-gs-font 7 7 SF
0 setgray
80.6 53 M
(\)) s
5 45 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 45 M
("time") s
/F-gs-font 7 7 SF
0 setgray
93.2 45 M
(\)) s
5 29 M
(    plt.subplot\(224\)) s
5 21 M
(    yd = murec[:,1]-sigmarec[:,1]) s
5 13 M
(    yu = murec[:,1]+sigmarec[:,1]) s
5 5 M
(    plt.fill_between\(time_stamp,yd,yu,facecolor=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
206.6 5 M
('y') s
/F-gs-font 7 7 SF
0 setgray
219.2 5 M
(, alpha=0.5\)) s
402 501 M
(    plt.plot\(time_stamp,murec[:,1]\)) s
402 493 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
418.8 493 M
(#plt.scatter\(range\(0,5000-1\),murec[:,0]\)) s
/F-gs-font 7 7 SF
0 setgray
402 485 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 485 M
("Y") s
/F-gs-font 7 7 SF
0 setgray
477.6 485 M
(\)) s
402 477 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 477 M
("time") s
/F-gs-font 7 7 SF
0 setgray
490.2 477 M
(\)) s
402 461 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 461 M
(if) s
/F-gs-font 7 7 SF
0 setgray
427.2 461 M
( yrec ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
452.4 461 M
(is) s
/F-gs-font 7 7 SF
0 setgray
460.8 461 M
( None:) s
402 453 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 453 M
(return) s
/F-gs-font 7 7 SF
0 setgray
402 445 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 445 M
(else) s
/F-gs-font 7 7 SF
0 setgray
435.6 445 M
(:) s
402 437 M
(        plt.subplot\(221\)) s
402 429 M
(        plt.scatter\(yrec[:,0], yrec[:,1],s=2\)) s
402 421 M
(        plt.subplot\(222\)) s
402 413 M
(        plt.scatter\(time_stamp, yrec[:,0],s=2\)) s
402 405 M
(        plt.subplot\(224\)) s
402 397 M
(        plt.scatter\(time_stamp, yrec[:,1],s=2\)) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
402 373 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
402 365 M
(#  Test functions for the matchernet_ekf.py) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
402 357 M
(#=======================================================================) s
/F-gs-font 7 7 SF
0 setgray
402 341 M
(mu0 = np.array\([[0,1.0]],dtype=np.float32\)) s
402 333 M
(A0 = np.array\([[-0.1,2],[-2,-0.1]],dtype=np.float32\)) s
402 325 M
(ey2 = np.eye\(2,dtype=np.float32\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 309 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 309 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 309 M
(test_BundleEKFContinuousTime01) s
/F-gs-font 7 7 SF
0 setgray
544.8 309 M
(\(dt, numSteps\):) s
402 301 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
418.8 301 M
(# test of BundleEKFContinuousTime with a two dimensional linear dynamics) s
/F-gs-font 7 7 SF
0 setgray
402 293 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
418.8 293 M
(# dx = dt * F * x + Q * dw) s
/F-gs-font 7 7 SF
0 setgray
402 285 M
(    b = BundleEKFContinuousTime\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
536.4 285 M
("B0") s
/F-gs-font 7 7 SF
0 setgray
553.2 285 M
(,2\)) s
402 277 M
(    b.dt = dt) s
402 269 M
(    b.print_state\(\)) s
402 261 M
(    b.f=fn.LinearFn\(2,2\)) s
402 253 M
(    b.f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 253 M
("A") s
/F-gs-font 7 7 SF
0 setgray
477.6 253 M
(] = A0) s
402 245 M
(    b.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
473.4 245 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
490.2 245 M
(] = mu0) s
402 229 M
(    dummy_input = {} ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
490.2 229 M
(# list of matchers \(#matcher=0\)) s
/F-gs-font 7 7 SF
0 setgray
402 221 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 221 M
(for) s
/F-gs-font 7 7 SF
0 setgray
431.4 221 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
444 221 M
(in) s
/F-gs-font 7 7 SF
0 setgray
452.4 221 M
( range\(numSteps\):) s
402 213 M
(        b\(dummy_input\)) s
402 197 M
(    visualize_bundle_rec\(b\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 173 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 173 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 173 M
(test_bundle_and_observer) s
/F-gs-font 7 7 SF
0 setgray
519.6 173 M
(\(dt, numSteps, yrec\):) s
402 165 M
(    b0 = observer.Observer\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
515.4 165 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
532.2 165 M
(,yrec\)) s
402 157 M
(    b1 = BundleEKFContinuousTime\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
540.6 157 M
("b1") s
/F-gs-font 7 7 SF
0 setgray
557.4 157 M
(,2\)) s
402 149 M
(    b1.f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
469.2 149 M
("A") s
/F-gs-font 7 7 SF
0 setgray
481.8 149 M
(] = A0) s
402 141 M
(    b1.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 141 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
494.4 141 M
(] = mu0) s
402 133 M
(    b1.dt = dt) s
402 125 M
(    dummy_input = {} ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
490.2 125 M
(# list of matchers \(#matcher=0\)) s
/F-gs-font 7 7 SF
0 setgray
402 117 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 117 M
(for) s
/F-gs-font 7 7 SF
0 setgray
431.4 117 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
444 117 M
(in) s
/F-gs-font 7 7 SF
0 setgray
452.4 117 M
( range\(numSteps\):) s
402 109 M
(        b0\(dummy_input\)) s
402 101 M
(        b1\(dummy_input\)) s
402 93 M
(        y=b0.get_state\(\)) s
402 85 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 85 M
(if) s
/F-gs-font 7 7 SF
0 setgray
444 85 M
( i==0:) s
402 77 M
(            yrec2=y) s
402 69 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 69 M
(else) s
/F-gs-font 7 7 SF
0 setgray
452.4 69 M
(:) s
402 61 M
(            yrec2 = np.concatenate\(\(yrec2,y\),axis=0\)) s
402 45 M
(    timestamp=np.array\(range\(0,numSteps\)\)) s
402 37 M
(    visualize_bundle_rec\(b1,yrec2\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 13 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 13 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 13 M
(test_MatcherEKF01) s
/F-gs-font 7 7 SF
0 setgray
490.2 13 M
(\(dt,numSteps,yrec\):) s
402 5 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
418.8 5 M
(''') s
_R
S
%%Page: (2) 11
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 2 def
/fname (./matchernet_py_001/ekf_test.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf_test.py) def
/Courier-Bold 7 7 SUF
% User defined strings:
/pagenumstr (2) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
0.737255 0.560784 0.560784 setrgbcolor
5 501 M
(    Run a matchernet of the following structure) s
5 493 M
(    b0 --- m01 --- b1) s
5 485 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 469 M
(    b1 = observer.Observer\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
118.4 469 M
("b1") s
/F-gs-font 7 7 SF
0 setgray
135.2 469 M
(,yrec\)) s
5 461 M
(    b1.obs_noise_covariance = 2 * ey2) s
5 445 M
(    b0 = BundleEKFContinuousTime\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
143.6 445 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
160.4 445 M
(,2\)) s
5 437 M
(    b0.f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
72.2 437 M
("A") s
/F-gs-font 7 7 SF
0 setgray
84.8 437 M
(] = A0) s
5 429 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 429 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 429 M
(] = mu0) s
5 421 M
(    b0.dt = dt) s
5 413 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 413 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 413 M
(][0][1]=2) s
5 405 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 405 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
110 405 M
(] = 2 * ey2) s
5 389 M
(    m01 = MatcherEKF\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
93.2 389 M
("m01") s
/F-gs-font 7 7 SF
0 setgray
114.2 389 M
(,b0,b1\)) s
5 381 M
(    m01.print_state\(\)) s
5 357 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 357 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 357 M
( _with_brica ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
84.8 357 M
(is) s
/F-gs-font 7 7 SF
0 setgray
93.2 357 M
( False:) s
5 349 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 349 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 349 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 349 M
(in) s
/F-gs-font 7 7 SF
0 setgray
72.2 349 M
( range\(numSteps\):) s
5 341 M
(            print_flush\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 341 M
("Step {}/{} with brica") s
/F-gs-font 7 7 SF
0 setgray
202.4 341 M
(.format\(i,numSteps\)\)) s
5 333 M
(            inputs_to_m01 = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
126.8 333 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
143.6 333 M
(:b0.state, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
189.8 333 M
("b1") s
/F-gs-font 7 7 SF
0 setgray
206.6 333 M
(:b1.state}) s
5 325 M
(            results = m01\(inputs_to_m01\)) s
5 317 M
(            inputs_to_b0 = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
122.6 317 M
("m01") s
/F-gs-font 7 7 SF
0 setgray
143.6 317 M
(:results[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
181.4 317 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
198.2 317 M
(]}) s
5 309 M
(            s0 = b0\(inputs_to_b0\)) s
5 301 M
(            inputs_to_b1 = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
122.6 301 M
("m01") s
/F-gs-font 7 7 SF
0 setgray
143.6 301 M
(:results[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
181.4 301 M
("b1") s
/F-gs-font 7 7 SF
0 setgray
198.2 301 M
(]}) s
5 293 M
(            s1 = b1\(inputs_to_b1\)) s
5 285 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 285 M
(else) s
/F-gs-font 7 7 SF
0 setgray
38.6 285 M
(:) s
5 277 M
(        s = VirtualTimeScheduler\(\)) s
5 261 M
(        bt = Timing\(0, 1, 1\)) s
5 253 M
(        bm = Timing\(1, 1, 1\)) s
5 237 M
(        s.add_component\( b0.component, bt\)) s
5 229 M
(        s.add_component\( b1.component, bt\)) s
5 221 M
(        s.add_component\( m01.component, bm\)) s
5 205 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 205 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 205 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 205 M
(in) s
/F-gs-font 7 7 SF
0 setgray
72.2 205 M
( range\(numSteps*2\):) s
5 197 M
(            print_flush\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 197 M
("Step {}/{} with brica") s
/F-gs-font 7 7 SF
0 setgray
202.4 197 M
(.format\(i,numSteps\)\)) s
5 189 M
(            s.step\(\)) s
5 173 M
(    visualize_bundle_rec\(b0, yrec\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 149 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 149 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 149 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 149 M
(:) s
5 133 M
(    utils._print_level = 2 ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
118.4 133 M
(#5 is the noisiest, 1 is the most quiet) s
/F-gs-font 7 7 SF
0 setgray
5 117 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 117 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 117 M
( False:) s
5 109 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 109 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 109 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 109 M
("===Starting UnitTest01===") s
/F-gs-font 7 7 SF
0 setgray
177.2 109 M
(\)) s
5 101 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 101 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 101 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 101 M
("-- A simple test of Bundle with no Matcher") s
/F-gs-font 7 7 SF
0 setgray
248.6 101 M
(\)) s
5 93 M
(        plt.figure\(1\)) s
5 85 M
(        test_BundleEKFContinuousTime01\(dt, numSteps\)) s
5 77 M
(        plt.pause\(0.2\)) s
5 61 M
(    dt = 0.02) s
5 53 M
(    numSteps = 500) s
5 37 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
21.8 37 M
(# preparing a list of three simulation sequences) s
/F-gs-font 7 7 SF
0 setgray
5 29 M
(    yrecs = []) s
5 21 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 21 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 21 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 21 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 21 M
( range\(1\):) s
5 13 M
(        sm=StateSpaceModel2Dim\(dt\)) s
5 5 M
(        sm.A = A0) s
402 501 M
(        sm.x = mu0[0]) s
402 493 M
(        sm.dt = dt) s
402 485 M
(        \(xrec,yrec\)=sm.simulation\(dt, numSteps\)) s
402 477 M
(        yrecs.append\(yrec\)) s
402 461 M
(    plt.figure\(0\)) s
402 453 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 453 M
(for) s
/F-gs-font 7 7 SF
0 setgray
431.4 453 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
444 453 M
(in) s
/F-gs-font 7 7 SF
0 setgray
452.4 453 M
( range\(1\):) s
402 445 M
(        plt.subplot\(2,2,i+1\)) s
402 437 M
(        plt.scatter\(yrecs[i][:,0],yrecs[i][:,1],s=2\)) s
402 429 M
(        plt.title\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 429 M
("sequence {}") s
/F-gs-font 7 7 SF
0 setgray
532.2 429 M
(.format\(i\)\)) s
402 421 M
(    plt.pause\(1\)) s
402 405 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 405 M
(if) s
/F-gs-font 7 7 SF
0 setgray
427.2 405 M
( False:) s
402 397 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 397 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 397 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 397 M
("===Starting UnitTest02===") s
/F-gs-font 7 7 SF
0 setgray
574.2 397 M
(\)) s
402 389 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 389 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 389 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 389 M
("-- A simple test of Bundle with Observer with no Matcher") s
/F-gs-font 7 7 SF
0 setgray
704.4 389 M
(\)) s
402 381 M
(        plt.figure\(2\)) s
402 373 M
(        test_bundle_and_observer\(dt, numSteps, yrec\)) s
402 365 M
(        plt.pause\(0.2\)) s
402 349 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 349 M
(if) s
/F-gs-font 7 7 SF
0 setgray
427.2 349 M
( False:) s
402 341 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 341 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 341 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 341 M
("===Starting UnitTest03===") s
/F-gs-font 7 7 SF
0 setgray
574.2 341 M
(\)) s
402 333 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 333 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 333 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 333 M
("-- A simple test to link a Bundle, a Observer, and a Matcher") s
/F-gs-font 7 7 SF
0 setgray
721.2 333 M
(\)) s
402 325 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 325 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 325 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 325 M
("-- without brica") s
/F-gs-font 7 7 SF
0 setgray
536.4 325 M
(\)) s
402 317 M
(        _with_brica = False) s
402 309 M
(        plt.figure\(4\)) s
402 301 M
(        test_MatcherEKF01\(dt, numSteps, yrec\)) s
402 293 M
(        plt.pause\(0.2\)) s
402 277 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 277 M
(if) s
/F-gs-font 7 7 SF
0 setgray
427.2 277 M
( True:) s
402 269 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 269 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 269 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 269 M
("===Starting UnitTest04===") s
/F-gs-font 7 7 SF
0 setgray
574.2 269 M
(\)) s
402 261 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 261 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 261 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 261 M
("-- A simple test to link a Bundle, a Observer, and a Matcher") s
/F-gs-font 7 7 SF
0 setgray
721.2 261 M
(\)) s
402 253 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 253 M
(print) s
/F-gs-font 7 7 SF
0 setgray
456.6 253 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 253 M
("-- with brica") s
/F-gs-font 7 7 SF
0 setgray
523.8 253 M
(\)) s
402 245 M
(        _with_brica = True) s
402 237 M
(        plt.figure\(3\)) s
402 229 M
(        test_MatcherEKF01\(dt, numSteps, yrecs[0]\)) s
402 221 M
(        plt.pause\(0.2\)) s
402 197 M
(    plt.pause\(5.0\)) s
_R
S
%%Page: (1) 12
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/ekf_test_multiple_observers.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf_test_multiple_observers.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/25/18) def
/modtimestr (15:38:01) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 501 M
( ekf) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 493 M
( ekf ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
42.8 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
68 493 M
( BundleEKFContinuousTime, MatcherEKF) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 485 M
( observer) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 477 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 477 M
( observer ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 477 M
(import) s
/F-gs-font 7 7 SF
0 setgray
89 477 M
( Observer) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 469 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 469 M
( matplotlib.pyplot as plt) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 461 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 461 M
( matplotlib as mpl) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 453 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 453 M
( state_space_model_2d) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 445 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 445 M
( state_space_model_2d ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
114.2 445 M
(import) s
/F-gs-font 7 7 SF
0 setgray
139.4 445 M
( StateSpaceModel2Dim) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 437 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 437 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 429 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 429 M
( fn) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 421 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 421 M
( brica) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 413 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 413 M
( brica ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 413 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 413 M
( Component, VirtualTimeScheduler, Timing) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 405 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 405 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 397 M
( utils ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 397 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 397 M
( print1, print2, print3, print4, print_flush) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 389 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 389 M
( sys) s
5 373 M
(_with_brica = True) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 365 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 365 M
( time) s
5 349 M
(mu0 = np.array\([[0,1.0]],dtype=np.float32\)) s
5 341 M
(A0 = np.array\([[-0.1,2],[-2,-0.1]],dtype=np.float32\)) s
5 333 M
(ey2 = np.eye\(2,dtype=np.float32\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 317 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 317 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 317 M
(ekf_test_multiple_observer) s
/F-gs-font 7 7 SF
0 setgray
131 317 M
(\(dt, numSteps, num_observers, yrecs\):) s
5 309 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 309 M
(''') s
5 301 M
(    Run a matchernet of the following structure) s
5 293 M
(    b0 --- m01 --- b1) s
5 285 M
(       --- m02 --- b2) s
5 277 M
(       --- m03 --- b3) s
5 269 M
(    where b1, b2, and b3 are Observers) s
5 261 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 253 M
(    b0 = BundleEKFContinuousTime\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
143.6 253 M
("b0") s
/F-gs-font 7 7 SF
0 setgray
160.4 253 M
(,2\)) s
5 245 M
(    b0.f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
72.2 245 M
("A") s
/F-gs-font 7 7 SF
0 setgray
84.8 245 M
(] = A0*0.5) s
5 237 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 237 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 237 M
(] = mu0) s
5 229 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 229 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
110 229 M
(] = 2*ey2) s
5 221 M
(    b0.dt = dt) s
5 213 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 213 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 213 M
(][0][1]= 2) s
5 197 M
(    bp = []) s
5 189 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 189 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 189 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 189 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 189 M
( range\(num_observers\):) s
5 181 M
(        bpname = ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
76.4 181 M
("bp{}") s
/F-gs-font 7 7 SF
0 setgray
101.6 181 M
(.format\(i\)) s
5 173 M
(        bptmp = Observer\(bpname, yrecs[i]\)) s
5 165 M
(        bptmp.obs_noise_covariance = 5.0*ey2) s
5 157 M
(        bp.append\( bptmp \)) s
5 141 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
21.8 141 M
(#bp[0].obs_noise_covariance = 4*ey2) s
/F-gs-font 7 7 SF
0 setgray
5 133 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
21.8 133 M
(#bp[1].obs_noise_covariance = 4*ey2) s
/F-gs-font 7 7 SF
0 setgray
5 117 M
(    mp = []) s
5 109 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 109 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 109 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 109 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 109 M
( range\(num_observers\):) s
5 101 M
(        mpname = ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
76.4 101 M
("mp0{}") s
/F-gs-font 7 7 SF
0 setgray
105.8 101 M
(.format\(i\)) s
5 93 M
(        mptmp = MatcherEKF\(mpname,b0,bp[i]\)) s
5 85 M
(        mp.append\( mptmp \)) s
5 69 M
(    s = VirtualTimeScheduler\(\)) s
5 53 M
(    bt = Timing\(0, 1, 1\)) s
5 45 M
(    bm = Timing\(1, 1, 1\)) s
5 29 M
(    s.add_component\(b0.component,bt\)) s
5 21 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 21 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 21 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 21 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 21 M
( range\(num_observers\):) s
5 13 M
(        s.add_component\( bp[i].component, bt\)) s
5 5 M
(        s.add_component\( mp[i].component, bm\)) s
402 493 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 493 M
(for) s
/F-gs-font 7 7 SF
0 setgray
431.4 493 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
444 493 M
(in) s
/F-gs-font 7 7 SF
0 setgray
452.4 493 M
( range\(numSteps*2\):) s
402 485 M
(        print_flush\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
486 485 M
("Step {}/{} with brica") s
/F-gs-font 7 7 SF
0 setgray
582.6 485 M
(.format\(i,numSteps\)\)) s
402 477 M
(        s.step\(\)) s
402 461 M
(    visualize_bundle_rec\(b0, yrecs[0]\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 445 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 445 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 445 M
(prepare_data) s
/F-gs-font 7 7 SF
0 setgray
469.2 445 M
(\(dt, num_steps, num_observers\):) s
402 437 M
(    yrecs = []) s
402 429 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 429 M
(for) s
/F-gs-font 7 7 SF
0 setgray
431.4 429 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
444 429 M
(in) s
/F-gs-font 7 7 SF
0 setgray
452.4 429 M
( range\(num_observers\):) s
402 421 M
(        print_flush\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
486 421 M
("Generating simulation sequences {}/{}") s
/F-gs-font 7 7 SF
0 setgray
649.8 421 M
(.format\(i,num_observers\)\)) s
402 413 M
(        sm=StateSpaceModel2Dim\(dt\)) s
402 405 M
(        sm.A = A0) s
402 397 M
(        sm.x = mu0[0]) s
402 389 M
(        sm.dt = dt) s
402 381 M
(        \(xrec,yrec\)=sm.simulation\(dt, num_steps\)) s
402 373 M
(        yrecs.append\(yrec\)) s
402 365 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 365 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 365 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 365 M
(" ") s
/F-gs-font 7 7 SF
0 setgray
456.6 365 M
(\)) s
402 357 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 357 M
(return) s
/F-gs-font 7 7 SF
0 setgray
444 357 M
( yrecs) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 341 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 341 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 341 M
(include_random_missing) s
/F-gs-font 7 7 SF
0 setgray
511.2 341 M
(\(y\):) s
402 333 M
(    num_channels = len\(y\)) s
402 325 M
(    num_timestep = len\(y[0][:,0]\)) s
402 317 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 317 M
(for) s
/F-gs-font 7 7 SF
0 setgray
431.4 317 M
( c ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
444 317 M
(in) s
/F-gs-font 7 7 SF
0 setgray
452.4 317 M
( range\(num_channels\):) s
402 309 M
(        y[c] = miss_hmm\(y[c]\)) s
402 301 M
(        plt.subplot\(num_channels,1,c+1\)) s
402 293 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 293 M
(for) s
/F-gs-font 7 7 SF
0 setgray
448.2 293 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
460.8 293 M
(in) s
/F-gs-font 7 7 SF
0 setgray
469.2 293 M
( range\(num_timestep\):) s
402 285 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
452.4 285 M
(if) s
/F-gs-font 7 7 SF
0 setgray
460.8 285 M
( np.isnan\(y[c][i,0]\):) s
402 277 M
(                plt.plot\([i,i],[-1,1],) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
561.6 277 M
('-') s
/F-gs-font 7 7 SF
0 setgray
574.2 277 M
(,color=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
603.6 277 M
('gray') s
/F-gs-font 7 7 SF
0 setgray
628.8 277 M
(,linewidth=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
675 277 M
('3') s
/F-gs-font 7 7 SF
0 setgray
687.6 277 M
(\)) s
402 269 M
(        plt.plot\(y[c],) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
494.4 269 M
('.-') s
/F-gs-font 7 7 SF
0 setgray
511.2 269 M
(\)) s
402 253 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 253 M
(return) s
/F-gs-font 7 7 SF
0 setgray
444 253 M
( y) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 237 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 237 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 237 M
(miss_hmm) s
/F-gs-font 7 7 SF
0 setgray
452.4 237 M
(\(y\):) s
402 229 M
(    num_steps, dim = y.shape) s
402 221 M
(    n = 8) s
402 213 M
(    r = np.convolve\( np.random.rand\(num_steps\)-0.5, np.ones\(n\), ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
670.8 213 M
('same') s
/F-gs-font 7 7 SF
0 setgray
696 213 M
(\)) s
402 205 M
(    y[:,0] = np.where\(r>0.5,y[:,0],np.nan\)) s
402 197 M
(    y[:,1] = np.where\(r>0.5,y[:,1],np.nan\)) s
402 189 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 189 M
(return) s
/F-gs-font 7 7 SF
0 setgray
444 189 M
( y) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 173 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 173 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 173 M
(visualize_bundle_rec) s
/F-gs-font 7 7 SF
0 setgray
502.8 173 M
(\(b, yrec=None\):) s
402 157 M
(    murec = b.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
490.2 157 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
507 157 M
(]) s
402 149 M
(    sigmarec = b.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
502.8 149 M
("diagSigma") s
/F-gs-font 7 7 SF
0 setgray
549 149 M
(]) s
402 141 M
(    time_stamp = b.record[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
511.2 141 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
561.6 141 M
(]) s
402 133 M
(    numofTimesteps = murec.shape[0]) s
402 125 M
(    timestamp = np.array\(range\(0,numofTimesteps\)\)) s
402 109 M
(    plt.subplot\(221\)) s
402 101 M
(    plt.plot\(murec[:,0],murec[:,1]\)) s
402 93 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 93 M
("X") s
/F-gs-font 7 7 SF
0 setgray
477.6 93 M
(\)) s
402 85 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 85 M
("Y") s
/F-gs-font 7 7 SF
0 setgray
477.6 85 M
(\)) s
402 77 M
(    plt.title\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
460.8 77 M
("Trajectory") s
/F-gs-font 7 7 SF
0 setgray
511.2 77 M
(\)) s
402 53 M
(    plt.subplot\(222\)) s
402 45 M
(    yd = murec[:,0]-sigmarec[:,0]) s
402 37 M
(    yu = murec[:,0]+sigmarec[:,0]) s
402 21 M
(    plt.fill_between\(time_stamp,yd,yu,facecolor=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
603.6 21 M
('y') s
/F-gs-font 7 7 SF
0 setgray
616.2 21 M
(, alpha=0.5\)) s
402 13 M
(    plt.plot\(time_stamp,murec[:,0]\)) s
402 5 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 5 M
("X") s
/F-gs-font 7 7 SF
0 setgray
477.6 5 M
(\)) s
_R
S
%%Page: (2) 13
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 2 def
/fname (./matchernet_py_001/ekf_test_multiple_observers.py) def
/fdir (./matchernet_py_001) def
/ftail (ekf_test_multiple_observers.py) def
% User defined strings:
/pagenumstr (2) def
/moddatestr (10/25/18) def
/modtimestr (15:38:01) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
5 501 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 501 M
("time") s
/F-gs-font 7 7 SF
0 setgray
93.2 501 M
(\)) s
5 485 M
(    plt.subplot\(224\)) s
5 477 M
(    yd = murec[:,1]-sigmarec[:,1]) s
5 469 M
(    yu = murec[:,1]+sigmarec[:,1]) s
5 461 M
(    plt.fill_between\(time_stamp,yd,yu,facecolor=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
206.6 461 M
('y') s
/F-gs-font 7 7 SF
0 setgray
219.2 461 M
(, alpha=0.5\)) s
5 453 M
(    plt.plot\(time_stamp,murec[:,1]\)) s
5 445 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
21.8 445 M
(#plt.scatter\(range\(0,5000-1\),murec[:,0]\)) s
/F-gs-font 7 7 SF
0 setgray
5 437 M
(    plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 437 M
("Y") s
/F-gs-font 7 7 SF
0 setgray
80.6 437 M
(\)) s
5 429 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 429 M
("time") s
/F-gs-font 7 7 SF
0 setgray
93.2 429 M
(\)) s
5 413 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 413 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 413 M
( yrec ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 413 M
(is) s
/F-gs-font 7 7 SF
0 setgray
63.8 413 M
( None:) s
5 405 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 405 M
(return) s
/F-gs-font 7 7 SF
0 setgray
5 397 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 397 M
(else) s
/F-gs-font 7 7 SF
0 setgray
38.6 397 M
(:) s
5 389 M
(        plt.subplot\(221\)) s
5 381 M
(        plt.scatter\(yrec[:,0], yrec[:,1],s=2\)) s
5 373 M
(        plt.subplot\(222\)) s
5 365 M
(        plt.scatter\(time_stamp, yrec[:,0],s=2\)) s
5 357 M
(        plt.subplot\(224\)) s
5 349 M
(        plt.scatter\(time_stamp, yrec[:,1],s=2\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 309 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 309 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 309 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 309 M
(:) s
5 293 M
(    utils._print_level = 1 ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
118.4 293 M
(#5 is the noisiest, 1 is the most quiet) s
/F-gs-font 7 7 SF
0 setgray
5 277 M
(    dt = 0.02) s
5 269 M
(    num_steps = 200) s
5 261 M
(    args = sys.argv) s
5 253 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 253 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 253 M
(\(args[1]\)) s
5 245 M
(    num_observers = int\(args[1]\)) s
5 229 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 229 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 229 M
(\( ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 229 M
("num_observers={}") s
/F-gs-font 7 7 SF
0 setgray
126.8 229 M
(.format\(num_observers\) \)) s
5 213 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
21.8 213 M
(# preparing a list simulation sequences) s
/F-gs-font 7 7 SF
0 setgray
5 205 M
(    yrecs = prepare_data\(dt, num_steps, num_observers\)) s
5 197 M
(    plt.figure\(1\)) s
5 189 M
(    yrecs = include_random_missing\(yrecs\)) s
5 181 M
(    plt.pause\(0.5\)) s
5 165 M
(    plt.figure\(2\)) s
5 157 M
(    start = time.time\(\)) s
5 149 M
(    ekf_test_multiple_observer\(dt, num_steps, num_observers, yrecs\)) s
5 141 M
(    elapsed_time = time.time\(\) - start) s
5 133 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 133 M
(print) s
/F-gs-font 7 7 SF
0 setgray
42.8 133 M
( \() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
51.2 133 M
("elapsed_time:{0}") s
/F-gs-font 7 7 SF
0 setgray
126.8 133 M
(.format\(elapsed_time\) + ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
227.6 133 M
("[sec]") s
/F-gs-font 7 7 SF
0 setgray
257 133 M
(\)) s
5 117 M
(    plt.pause\(100\)) s
_R
S
%%Page: (1) 14
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/test_bundlenet_with_brica2.py) def
/fdir (./matchernet_py_001) def
/ftail (test_bundlenet_with_brica2.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 501 M
( operator ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
89 501 M
( add) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 493 M
( functools ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
68 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
93.2 493 M
( reduce) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 485 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 469 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 469 M
( brica) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 461 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 461 M
( brica ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 461 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 461 M
( Component, VirtualTimeScheduler, Timing) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 453 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 453 M
( state) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 445 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 445 M
( copy) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 429 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 429 M
( NullBundle\(object\):) s
5 421 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 421 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 421 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 421 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 421 M
(\(self, name, n\):) s
5 413 M
(        super\(NullBundle, self\).__init__\(\)) s
5 405 M
(        self.name = name) s
5 397 M
(        self.state = state.StateMuSigma\(n\)) s
5 389 M
(        self.component = Component\(self\)) s
5 381 M
(        self.component.make_out_port\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
160.4 381 M
("state") s
/F-gs-font 7 7 SF
0 setgray
189.8 381 M
(\)) s
5 365 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 365 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 365 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 365 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
72.2 365 M
(\(self, inputs\):) s
5 357 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 357 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 357 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 357 M
(in) s
/F-gs-font 7 7 SF
0 setgray
80.6 357 M
( inputs:) s
5 349 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 349 M
(if) s
/F-gs-font 7 7 SF
0 setgray
63.8 349 M
( inputs[key] ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
118.4 349 M
(is) s
/F-gs-font 7 7 SF
0 setgray
126.8 349 M
( ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 349 M
(not) s
/F-gs-font 7 7 SF
0 setgray
143.6 349 M
( None:) s
5 341 M
(                self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
139.4 341 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
156.2 341 M
(] += inputs[key].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
248.6 341 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
265.4 341 M
(]) s
5 333 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 333 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 333 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 333 M
("{} state: {}") s
/F-gs-font 7 7 SF
0 setgray
122.6 333 M
(.format\(self.name, self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
269.6 333 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
286.4 333 M
(]\)\)) s
5 325 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 325 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 325 M
( {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
72.2 325 M
("state") s
/F-gs-font 7 7 SF
0 setgray
101.6 325 M
(: self.state}) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 301 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 301 M
( NullMatcher\(object\):) s
5 293 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 293 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 293 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 293 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 293 M
(\(self, name, *bundles\):) s
5 285 M
(        super\(NullMatcher, self\).__init__\(\)) s
5 277 M
(        self.name = name) s
5 269 M
(        self.component = Component\(self\)) s
5 261 M
(        self.result_state = {}) s
5 253 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 253 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 253 M
( bundle ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
84.8 253 M
(in) s
/F-gs-font 7 7 SF
0 setgray
93.2 253 M
( bundles:) s
5 245 M
(            self.component.make_in_port\(bundle.name\)) s
5 237 M
(            self.component.make_out_port\(bundle.name\)) s
5 221 M
(            bundle.component.make_in_port\(name\)) s
5 205 M
(            brica.connect\(bundle.component, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
189.8 205 M
("state") s
/F-gs-font 7 7 SF
0 setgray
219.2 205 M
(, self.component, bundle.name\)) s
5 197 M
(            brica.connect\(self.component, bundle.name, bundle.component, name\)) s
5 189 M
(            self.result_state[bundle.name] = copy.deepcopy\(bundle.state\)) s
5 173 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 173 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 173 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 173 M
(__call__) s
/F-gs-font 7 7 SF
0 setgray
72.2 173 M
(\(self, inputs\):) s
5 165 M
(        mu = {}) s
5 157 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 157 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 157 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 157 M
(in) s
/F-gs-font 7 7 SF
0 setgray
80.6 157 M
( inputs:) s
5 149 M
(            mu[key] = inputs[key].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 149 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
185.6 149 M
(]) s
5 141 M
(        mean = reduce\(add, mu.values\(\)\) / len\(inputs\)) s
5 133 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 133 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 133 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 133 M
(in) s
/F-gs-font 7 7 SF
0 setgray
80.6 133 M
( inputs:) s
5 125 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 125 M
(if) s
/F-gs-font 7 7 SF
0 setgray
63.8 125 M
( inputs[key] ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
118.4 125 M
(is) s
/F-gs-font 7 7 SF
0 setgray
126.8 125 M
( ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 125 M
(not) s
/F-gs-font 7 7 SF
0 setgray
143.6 125 M
( None:) s
5 117 M
(                self.result_state[key].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
189.8 117 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
206.6 117 M
(] = \(mean - mu[key]\) * 0.1) s
5 109 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 109 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 109 M
( self.result_state) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 85 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 85 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 85 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 85 M
(:) s
5 69 M
(    n = 4) s
5 53 M
(    b0 = NullBundle\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 53 M
("Bundle0") s
/F-gs-font 7 7 SF
0 setgray
126.8 53 M
(, n\)) s
5 45 M
(    b1 = NullBundle\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 45 M
("Bundle1") s
/F-gs-font 7 7 SF
0 setgray
126.8 45 M
(, n\)) s
5 37 M
(    b2 = NullBundle\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 37 M
("Bundle2") s
/F-gs-font 7 7 SF
0 setgray
126.8 37 M
(, n\)) s
5 21 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 21 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 21 M
(] = np.array\([0, 1, 0, 0]\).astype\(np.float32\)) s
5 13 M
(    b1.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 13 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 13 M
(] = np.array\([0, 0, 10, 0]\).astype\(np.float32\)) s
5 5 M
(    b2.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 5 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 5 M
(] = np.array\([0, 0, 0, 100]\).astype\(np.float32\)) s
402 493 M
(    m01 = NullMatcher\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
494.4 493 M
("Matcher01") s
/F-gs-font 7 7 SF
0 setgray
540.6 493 M
(, b0, b1\)) s
402 485 M
(    m02 = NullMatcher\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
494.4 485 M
("Matcher02") s
/F-gs-font 7 7 SF
0 setgray
540.6 485 M
(, b0, b2\)) s
402 477 M
(    m12 = NullMatcher\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
494.4 477 M
("Matcher12") s
/F-gs-font 7 7 SF
0 setgray
540.6 477 M
(, b1, b2\)) s
402 461 M
(    s = VirtualTimeScheduler\(\)) s
402 453 M
(    bt = Timing\(0, 1, 1\)) s
402 445 M
(    bm = Timing\(1, 1, 1\)) s
402 429 M
(    s.add_component\(b0.component, bt\)) s
402 421 M
(    s.add_component\(b1.component, bt\)) s
402 413 M
(    s.add_component\(b2.component, bt\)) s
402 397 M
(    s.add_component\( m01.component, bm\)) s
402 389 M
(    s.add_component\( m02.component, bm\)) s
402 381 M
(    s.add_component\( m12.component, bm\)) s
402 365 M
(    s.step\(\)) s
402 357 M
(    s.step\(\)) s
402 349 M
(    s.step\(\)) s
402 341 M
(    s.step\(\)) s
_R
S
%%Page: (1) 15
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/fn.py) def
/fdir (./matchernet_py_001) def
/ftail (fn.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
5 501 M
(""") s
5 493 M
(fn.py) s
5 485 M
(=====) s
5 469 M
(This module contains function handler classes that the BundleNet) s
5 461 M
(architecture needs. It is overridden when you use chainer/TensorFlow to implement the arbitr) s
5 453 M
(ary parametric functions.) s
5 437 M
(""") s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 421 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 421 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 405 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 405 M
( Fn\(object\):) s
5 397 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 397 M
(''' An abstract class to implement numerical function) s
5 389 M
(    that BundleNet uses.) s
5 381 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 373 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 373 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 373 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 373 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 373 M
(\(self, dim_in, dim_out\):) s
5 365 M
(        self.shape =\(dim_in,dim_out\)) s
5 357 M
(        self.params = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
101.6 357 M
("none") s
/F-gs-font 7 7 SF
0 setgray
126.8 357 M
(:0}) s
5 341 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 341 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 341 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 341 M
(get_params) s
/F-gs-font 7 7 SF
0 setgray
80.6 341 M
(\(\):) s
5 333 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 333 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 333 M
( self.params) s
5 317 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 317 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 317 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 317 M
(value) s
/F-gs-font 7 7 SF
0 setgray
59.6 317 M
(\(self, x\):) s
5 309 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 309 M
(''' Numerically calculates f\(x\)) s
5 301 M
(          x should be a numpy array of shape \(dim_in, 1\)) s
5 293 M
(          outputs a numpy array of shape \(dim_out, 1\)) s
5 285 M
(         ''') s
/F-gs-font 7 7 SF
0 setgray
5 277 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 277 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 277 M
( 0) s
5 269 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 269 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 269 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 269 M
(x) s
/F-gs-font 7 7 SF
0 setgray
42.8 269 M
(\(self, x\):) s
5 261 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 261 M
(''' Numerically calculates df/dx) s
5 253 M
(          outputs a numpy array of shape \(dim_out, dim_in\)) s
5 245 M
(         ''') s
/F-gs-font 7 7 SF
0 setgray
5 237 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 237 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 237 M
( 0) s
5 229 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 229 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 229 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 229 M
(xx) s
/F-gs-font 7 7 SF
0 setgray
47 229 M
(\(self, x\):) s
5 221 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 221 M
(''' Numerically calculates df^2/dx^2) s
5 213 M
(          outputs a numpy array of shape \(dim_out, dim_in, dim_in\)) s
5 205 M
(         ''') s
/F-gs-font 7 7 SF
0 setgray
5 197 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 197 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 197 M
( 0) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 181 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 181 M
( LinearFn\(Fn\):) s
5 173 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 173 M
(''' Linear function y = np.dot\( x, A \) and its derivatives.''') s
/F-gs-font 7 7 SF
0 setgray
5 165 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 165 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 165 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 165 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 165 M
(\(self, dim_in, dim_out\):) s
5 157 M
(        super\(LinearFn, self\).__init__\(dim_in, dim_out\)) s
5 149 M
(        A = np.zeros\(\(dim_out,dim_in\),dtype=np.float32\)) s
5 141 M
(        self.params = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
101.6 141 M
("A") s
/F-gs-font 7 7 SF
0 setgray
114.2 141 M
(:A}) s
5 125 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 125 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 125 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 125 M
(value) s
/F-gs-font 7 7 SF
0 setgray
59.6 125 M
(\(self, x\):) s
5 117 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 117 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 117 M
( np.dot\( x, self.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
164.6 117 M
("A") s
/F-gs-font 7 7 SF
0 setgray
177.2 117 M
(] \)) s
5 101 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 101 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 101 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 101 M
(x) s
/F-gs-font 7 7 SF
0 setgray
42.8 101 M
(\(self, x\):) s
5 93 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 93 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 93 M
( self.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
118.4 93 M
("A") s
/F-gs-font 7 7 SF
0 setgray
131 93 M
(]) s
5 77 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 77 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 77 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 77 M
(xx) s
/F-gs-font 7 7 SF
0 setgray
47 77 M
(\(self, x\):) s
5 69 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 69 M
(return) s
/F-gs-font 7 7 SF
0 setgray
63.8 69 M
( np.zeros\(self.shape,dtype=np.float32\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 53 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 53 M
( LinearFnXU\(Fn\):) s
5 45 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 45 M
(''' Linear function y = np.dot\( x, A \) + np.dot\( u, B \)) s
5 37 M
(     and its derivatives.''') s
/F-gs-font 7 7 SF
0 setgray
5 29 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 29 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 29 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 29 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 29 M
(\(self, dim_x, dim_u, dim_out\):) s
5 21 M
(        super\(LinearFnXU, self\).__init__\(dim_x, dim_out\)) s
5 13 M
(        A = np.zeros\(\(dim_out,dim_x\),dtype=np.float32\)) s
5 5 M
(        B = np.zeros\(\(dim_out,dim_u\),dtype=np.float32\)) s
402 501 M
(        self.params = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
498.6 501 M
("A") s
/F-gs-font 7 7 SF
0 setgray
511.2 501 M
(:A, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
528 501 M
("B") s
/F-gs-font 7 7 SF
0 setgray
540.6 501 M
(:B}) s
402 493 M
(        self.dim_x = dim_x) s
402 485 M
(        self.dim_u = dim_u) s
402 477 M
(        self.dim_out = dim_out) s
402 461 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 461 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 461 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 461 M
(value) s
/F-gs-font 7 7 SF
0 setgray
456.6 461 M
(\(self, x, u\):) s
402 453 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 453 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 453 M
( np.dot\( x, self.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
561.6 453 M
("A") s
/F-gs-font 7 7 SF
0 setgray
574.2 453 M
(] \) + np.dot\( u, self.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
696 453 M
("B") s
/F-gs-font 7 7 SF
0 setgray
708.6 453 M
(]\)) s
402 437 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 437 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 437 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 437 M
(x) s
/F-gs-font 7 7 SF
0 setgray
439.8 437 M
(\(self, x, u\):) s
402 429 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 429 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 429 M
( self.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
515.4 429 M
("A") s
/F-gs-font 7 7 SF
0 setgray
528 429 M
(]) s
402 413 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 413 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 413 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 413 M
(u) s
/F-gs-font 7 7 SF
0 setgray
439.8 413 M
(\(self, x, u\):) s
402 405 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 405 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 405 M
( self.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
515.4 405 M
("B") s
/F-gs-font 7 7 SF
0 setgray
528 405 M
(]) s
402 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 389 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 389 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 389 M
(xx) s
/F-gs-font 7 7 SF
0 setgray
444 389 M
(\(self, x, u\):) s
402 381 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 381 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 381 M
( np.zeros\(\(self.dim_out,self.dim_x,self.dim_x\),dtype=np.float32\)) s
402 365 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 365 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 365 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 365 M
(xu) s
/F-gs-font 7 7 SF
0 setgray
444 365 M
(\(self, x, u\):) s
402 357 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 357 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 357 M
( np.zeros\(\(self.dim_out,self.dim_x,self.dim_u\),dtype=np.float32\)) s
402 341 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 341 M
(def) s
/F-gs-font 7 7 SF
0 setgray
431.4 341 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
435.6 341 M
(uu) s
/F-gs-font 7 7 SF
0 setgray
444 341 M
(\(self, x, u\):) s
402 333 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
435.6 333 M
(return) s
/F-gs-font 7 7 SF
0 setgray
460.8 333 M
( np.zeros\(\(self.dim_out,self.dim_u,self.dim_u\),dtype=np.float32\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 317 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 317 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 317 M
(test_LinearFn) s
/F-gs-font 7 7 SF
0 setgray
473.4 317 M
(\(\):) s
402 309 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 309 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 309 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 309 M
("=== testLinearFn\(\) ===") s
/F-gs-font 7 7 SF
0 setgray
544.8 309 M
(\)) s
402 301 M
(    matA = np.array\([[5,1,1],[1,2,3]],dtype=np.float32\)) s
402 293 M
(    x = np.array\([[3,1]],dtype=np.float32\)) s
402 285 M
(    y = np.dot\(x,matA\)) s
402 277 M
(    f = LinearFn\(3,2\)) s
402 269 M
(    f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
456.6 269 M
("A") s
/F-gs-font 7 7 SF
0 setgray
469.2 269 M
(] = matA) s
402 261 M
(    yout = f.value\(x\)) s
402 253 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 253 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 253 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 253 M
("matA:") s
/F-gs-font 7 7 SF
0 setgray
473.4 253 M
(,matA\)) s
402 245 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 245 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 245 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 245 M
("x:") s
/F-gs-font 7 7 SF
0 setgray
460.8 245 M
(,x\)) s
402 237 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 237 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 237 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 237 M
("y:") s
/F-gs-font 7 7 SF
0 setgray
460.8 237 M
(,y\)) s
402 229 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 229 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 229 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 229 M
("f\(x\):") s
/F-gs-font 7 7 SF
0 setgray
473.4 229 M
(,yout\)) s
402 221 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 221 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 221 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 221 M
("f_x\(x\):") s
/F-gs-font 7 7 SF
0 setgray
481.8 221 M
(,f.x\(x\)\)) s
402 213 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 213 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 213 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 213 M
("f_xx\(x\):") s
/F-gs-font 7 7 SF
0 setgray
486 213 M
(,f.xx\(x\)\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 197 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 197 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 197 M
(test_LinearFnXU) s
/F-gs-font 7 7 SF
0 setgray
481.8 197 M
(\(\):) s
402 189 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 189 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 189 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 189 M
("=== testLinearFnXU ===") s
/F-gs-font 7 7 SF
0 setgray
544.8 189 M
(\)) s
402 181 M
(    matA = np.array\([[5,1,1],[1,2,3]],dtype=np.float32\)) s
402 173 M
(    matB = np.array\([[1,0,0]],dtype=np.float32\)) s
402 165 M
(    x = np.array\([[3,1]],dtype=np.float32\)) s
402 157 M
(    u = np.array\([[1]]\)) s
402 149 M
(    y = np.dot\(x,matA\) + np.dot\(u,matB\)) s
402 141 M
(    f = LinearFnXU\(3,1,2\)) s
402 133 M
(    f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
456.6 133 M
("A") s
/F-gs-font 7 7 SF
0 setgray
469.2 133 M
(] = matA) s
402 125 M
(    f.params[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
456.6 125 M
("B") s
/F-gs-font 7 7 SF
0 setgray
469.2 125 M
(] = matB) s
402 117 M
(    yout = f.value\(x,u\)) s
402 109 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 109 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 109 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 109 M
("matA:") s
/F-gs-font 7 7 SF
0 setgray
473.4 109 M
(,matA\)) s
402 101 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 101 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 101 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 101 M
("matB:") s
/F-gs-font 7 7 SF
0 setgray
473.4 101 M
(,matB\)) s
402 93 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 93 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 93 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 93 M
("x:") s
/F-gs-font 7 7 SF
0 setgray
460.8 93 M
(,x\)) s
402 85 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 85 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 85 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 85 M
("u:") s
/F-gs-font 7 7 SF
0 setgray
460.8 85 M
(,u\)) s
402 77 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 77 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 77 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 77 M
("y:") s
/F-gs-font 7 7 SF
0 setgray
460.8 77 M
(,y\)) s
402 69 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 69 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 69 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 69 M
("f\(x,u\):") s
/F-gs-font 7 7 SF
0 setgray
481.8 69 M
(,yout\)) s
402 61 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 61 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 61 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 61 M
("f_x\(x,u\):") s
/F-gs-font 7 7 SF
0 setgray
490.2 61 M
(,f.x\(x,u\)\)) s
402 53 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 53 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 53 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 53 M
("f_xx\(x,u\):") s
/F-gs-font 7 7 SF
0 setgray
494.4 53 M
(,f.xx\(x,u\)\)) s
402 45 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 45 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 45 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 45 M
("f_u\(x,u\):") s
/F-gs-font 7 7 SF
0 setgray
490.2 45 M
(,f.u\(x,u\)\)) s
402 37 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 37 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 37 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 37 M
("f_xu\(x,u\):") s
/F-gs-font 7 7 SF
0 setgray
494.4 37 M
(,f.xu\(x,u\)\)) s
402 29 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 29 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 29 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 29 M
("f_uu\(x,u\):") s
/F-gs-font 7 7 SF
0 setgray
494.4 29 M
(,f.uu\(x,u\)\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 13 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 13 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 13 M
(test_all) s
/F-gs-font 7 7 SF
0 setgray
452.4 13 M
(\(\):) s
402 5 M
(    test_LinearFn\(\)) s
_R
S
%%Page: (2) 16
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 2 def
/fname (./matchernet_py_001/fn.py) def
/fdir (./matchernet_py_001) def
/ftail (fn.py) def
% User defined strings:
/pagenumstr (2) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
5 501 M
(    test_LinearFnXU\(\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(if) s
/F-gs-font 7 7 SF
0 setgray
13.4 485 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
68 485 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
110 485 M
(:) s
5 477 M
(    test_all\(\)) s
_R
S
%%Page: (1) 17
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/utils.py) def
/fdir (./matchernet_py_001) def
/ftail (utils.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/18/18) def
/modtimestr (15:43:10) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 501 M
(# -*- coding: utf-8 -*-) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 493 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 485 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 485 M
( matplotlib.pyplot as plt) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 477 M
(# from PIL import Image) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 469 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 469 M
( sys) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 453 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 453 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 453 M
(print_flush) s
/F-gs-font 7 7 SF
0 setgray
68 453 M
(\(s\):) s
5 445 M
(    sys.stdout.write\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
93.2 445 M
("\\r") s
/F-gs-font 7 7 SF
0 setgray
110 445 M
(+s\)) s
5 437 M
(    sys.stdout.flush\(\)) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
5 421 M
(# print variants for debug) s
/F-gs-font 7 7 SF
0 setgray
5 413 M
(_print_level = 1) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 397 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 397 M
(print5) s
/F-gs-font 7 7 SF
0 setgray
47 397 M
(\(fm\):) s
5 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 389 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 389 M
( _print_level>5:) s
5 381 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 381 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 381 M
(\(fm\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 365 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 365 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 365 M
(print4) s
/F-gs-font 7 7 SF
0 setgray
47 365 M
(\(fm\):) s
5 357 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 357 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 357 M
( _print_level>4:) s
5 349 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 349 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 349 M
(\(fm\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 333 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 333 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 333 M
(print3) s
/F-gs-font 7 7 SF
0 setgray
47 333 M
(\(fm\):) s
5 325 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 325 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 325 M
( _print_level>3:) s
5 317 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 317 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 317 M
(\(fm\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 301 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 301 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 301 M
(print2) s
/F-gs-font 7 7 SF
0 setgray
47 301 M
(\(fm\):) s
5 293 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 293 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 293 M
( _print_level>2:) s
5 285 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 285 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 285 M
(\(fm\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 269 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 269 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 269 M
(print1) s
/F-gs-font 7 7 SF
0 setgray
47 269 M
(\(fm\):) s
5 261 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 261 M
(if) s
/F-gs-font 7 7 SF
0 setgray
30.2 261 M
( _print_level>1:) s
5 253 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 253 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 253 M
(\(fm\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 237 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 237 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 237 M
(zeros) s
/F-gs-font 7 7 SF
0 setgray
42.8 237 M
(\( m \):) s
5 229 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 229 M
(return) s
/F-gs-font 7 7 SF
0 setgray
47 229 M
( np.zeros\( m \).astype\(np.float32\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 213 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 213 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 213 M
(identity) s
/F-gs-font 7 7 SF
0 setgray
55.4 213 M
(\( m \):) s
5 205 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 205 M
(return) s
/F-gs-font 7 7 SF
0 setgray
47 205 M
( np.identity\(self.m,dtype=np.float32\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 189 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 189 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 189 M
(regularize_cov_matrix) s
/F-gs-font 7 7 SF
0 setgray
110 189 M
(\( a, mineig=1e-5 \):) s
5 181 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 181 M
(""") s
5 173 M
(    regularize the covariance matrix  a  so that its minimum eigen value is larger than  min) s
5 165 M
(eig.) s
5 157 M
(    """) s
/F-gs-font 7 7 SF
0 setgray
5 149 M
(    l, p = np.linalg.eigh\(a\)) s
5 141 M
(      ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
30.2 141 M
(# Note: using eigh\(\) rather than eig\(\)) s
/F-gs-font 7 7 SF
0 setgray
5 133 M
(    n = l.size) s
5 125 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 125 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 125 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 125 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 125 M
( range\(n\):) s
5 117 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 117 M
(if) s
/F-gs-font 7 7 SF
0 setgray
47 117 M
( l[i] < mineig:) s
5 109 M
(            l[i] = mineig) s
5 101 M
(    ar = np.dot\(np.dot\(p,np.diag\(l\)\),p.T\)) s
5 93 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 93 M
(return) s
/F-gs-font 7 7 SF
0 setgray
47 93 M
( ar) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 77 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 77 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 77 M
(q_plot001) s
/F-gs-font 7 7 SF
0 setgray
59.6 77 M
(\( n, q_array, x_array \):) s
5 69 M
(    trange = range\(0,q_array.shape[0]\)) s
5 61 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 61 M
(for) s
/F-gs-font 7 7 SF
0 setgray
34.4 61 M
( i ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
47 61 M
(in) s
/F-gs-font 7 7 SF
0 setgray
55.4 61 M
( range\(n\):) s
5 53 M
(        plt.subplot\(n,1,i+1\)) s
5 45 M
(        mu = q_array[:,i+1]) s
5 37 M
(        s = np.sqrt\( q_array[:,1+n+\(n*i+i\)] \)) s
5 29 M
(        x = x_array[:,i]) s
5 21 M
(        q_plot002\(trange,mu,s,color=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
156.2 21 M
('green') s
/F-gs-font 7 7 SF
0 setgray
185.6 21 M
(\)) s
5 13 M
(        plt.plot\(x, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
89 13 M
('b.-') s
/F-gs-font 7 7 SF
0 setgray
110 13 M
(\)) s
5 5 M
(        plt.ylabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
84.8 5 M
("x{i}") s
/F-gs-font 7 7 SF
0 setgray
110 5 M
(.format\(i=i\)\)) s
402 501 M
(    plt.xlabel\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 501 M
("Time") s
/F-gs-font 7 7 SF
0 setgray
490.2 501 M
(\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 485 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 485 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 485 M
(q_plot002) s
/F-gs-font 7 7 SF
0 setgray
456.6 485 M
(\( trange, mu, s, color=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
553.2 485 M
('blue') s
/F-gs-font 7 7 SF
0 setgray
578.4 485 M
(\):) s
402 477 M
(    plt.fill_between\(trange, mu-s, mu+s,) s
402 469 M
(                        edgecolor=) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
544.8 469 M
('none') s
/F-gs-font 7 7 SF
0 setgray
570 469 M
(, facecolor=color,alpha=0.2\)) s
402 461 M
(    plt.plot\(trange, mu, ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
507 461 M
('-') s
/F-gs-font 7 7 SF
0 setgray
519.6 461 M
(, color=color\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 445 M
(def) s
/F-gs-font 7 7 SF
0 setgray
414.6 445 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
418.8 445 M
(calc_matrix_F) s
/F-gs-font 7 7 SF
0 setgray
473.4 445 M
(\(A, dt\):) s
402 437 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
418.8 437 M
(#A = self.f.Jacobian\( mu \)) s
/F-gs-font 7 7 SF
0 setgray
402 429 M
(    n = A.shape[1]) s
402 421 M
(    A2 = np.dot\(A,A\)) s
402 413 M
(    A3 = np.dot\(A2,A\)) s
402 405 M
(    F=np.identity\(n,dtype=np.float32\) + dt * A + dt*dt*A2/2.0 + dt**3 * A3/6.0) s
402 397 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
418.8 397 M
(#print\('F: ',F\)) s
/F-gs-font 7 7 SF
0 setgray
402 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 389 M
(return) s
/F-gs-font 7 7 SF
0 setgray
444 389 M
( F) s
402 381 M
(    ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
418.8 381 M
(# return np.identity\(self.n\) + dt * A + dt*dt*A2/2.0) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 365 M
(if) s
/F-gs-font 7 7 SF
0 setgray
410.4 365 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 365 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
507 365 M
(:) s
402 357 M
(    a = np.array\( [[5,1,1],[1,5,1],[0,0,0]], dtype=np.float32\)) s
402 349 M
(    ar = regularize_cov_matrix\(a\)) s
_R
S
%%Page: (1) 18
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/state.py) def
/fdir (./matchernet_py_001) def
/ftail (state.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 501 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 501 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 493 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 493 M
( warnings) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 477 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 477 M
( State\(object\):) s
5 469 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 469 M
('''Class State is a state handler that maintains, serializes, and deserializes the state) s
5 461 M
( of Bundles or Matchers.) s
5 453 M
(    The methods serialize\(\) and deserialize\(\) are required for BriCA1 components to exchange) s
5 445 M
( their states as numpy.array objects.) s
5 429 M
(    A Bundle/Matcher has its state as a dictionary.) s
5 421 M
(    For exmaple,) s
5 413 M
(    B0.state = state.State\(\)) s
5 405 M
(    B0.state.data = {"mu":np.array\([1,2]\),) s
5 397 M
(               "Sigma":np.array\([[1,0],[0,1]]\)}) s
5 389 M
(    The disctionary is serialized with a method  serialize\(\)) s
5 381 M
(    q = B0.serialize\(\)) s
5 373 M
(    into a numpy.array object  q  .) s
5 365 M
(    The serialized array is exchanged through  BriCA1 IN/OUT ports) s
5 357 M
(    and deserialized with a method  deserialize\(\) as.) s
5 349 M
(    B0.deserialize\(q\)) s
5 341 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 333 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 333 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 333 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 333 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 333 M
(\(self, n\):) s
5 325 M
(        self.n = n) s
5 317 M
(        self.data = {) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
93.2 317 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
110 317 M
(:utils.zeros\(\(1,n\)\)}) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 301 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 301 M
( StatePlain\(State\):) s
5 293 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 293 M
('''StatePlain is a State that handles plain numpy.array.) s
5 285 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 277 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 277 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 277 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 277 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 277 M
(\(self, n \):) s
5 269 M
(        ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
38.6 269 M
('''Initializer takes a dimensionarity of the vector.''') s
/F-gs-font 7 7 SF
0 setgray
5 261 M
(        self.n = n) s
5 253 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 253 M
(#super\(\).__init__\(self.n\)) s
/F-gs-font 7 7 SF
0 setgray
5 245 M
(        super\(StatePlain, self\).__init__\(self.n\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 229 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 229 M
( StateMuSigmaDiag\(State\):) s
5 221 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 221 M
('''StateMuSigmaDiag is a state handler that handles) s
5 213 M
(    state variable as the following dictionary style.) s
5 205 M
(    B.state.data = {"id":1,) s
5 197 M
(            "mu":numpy.array\([1,2,3]\),) s
5 189 M
(            "sigma":numpy.array\([2.0,2.0,2.0]\)}) s
5 181 M
(    Note that StateMuSigma and StateMuSigmaDiag have) s
5 173 M
(        n x n matrix "Sigma" and n vector "sigma",) s
5 165 M
(        respectively.) s
5 157 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 149 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 149 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 149 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 149 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 149 M
(\(self, n\):) s
5 141 M
(        self.n = n) s
5 133 M
(        super\(StateMuSigmaDiag,self\).__init__\(n\)) s
5 125 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 125 M
("id") s
/F-gs-font 7 7 SF
0 setgray
97.4 125 M
(] = 1) s
5 117 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 117 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
131 117 M
(] = 0) s
5 109 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 109 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 109 M
(] = utils.zeros\(\(1,n\)\)) s
5 101 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 101 M
("sigma") s
/F-gs-font 7 7 SF
0 setgray
110 101 M
(] = utils.zeros\(\(1,n\)\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 85 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 85 M
( StateMuSigma\(State\):) s
5 77 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 77 M
('''StateMuSigma is a state handler that handles) s
5 69 M
(    state variable as the following dictionary style.) s
5 61 M
(    B.state.data = {"id":1,) s
5 53 M
(            "mu":numpy.array\([1,2,3]\),) s
5 45 M
(            "Sigma":numpy.array\([[1,0,0],[0,1,0],[0,0,1]]\)}) s
5 37 M
(    Note that StateMuSigma and StateMuSigmaDiag have) s
5 29 M
(        n x n matrix "Sigma" and n vector "sigma",) s
5 21 M
(        respectively.) s
5 13 M
(    ''') s
/F-gs-font 7 7 SF
0 setgray
5 5 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 5 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 5 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 5 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 5 M
(\(self, n\):) s
402 501 M
(        self.n = n) s
402 493 M
(        super\(StateMuSigma,self\).__init__\(n\)) s
402 485 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 485 M
("id") s
/F-gs-font 7 7 SF
0 setgray
494.4 485 M
(] = 1) s
402 477 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 477 M
("time_stamp") s
/F-gs-font 7 7 SF
0 setgray
528 477 M
(] = 0) s
402 469 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 469 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
494.4 469 M
(] = utils.zeros\(\(1,n\)\)) s
402 461 M
(        self.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 461 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
507 461 M
(] = utils.zeros\(\(n,n\)\)) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 437 M
(if) s
/F-gs-font 7 7 SF
0 setgray
410.4 437 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 437 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
507 437 M
(:) s
402 429 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 429 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 429 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 429 M
("===Testing StatePlain===") s
/F-gs-font 7 7 SF
0 setgray
553.2 429 M
(\)) s
402 421 M
(    s = StatePlain\(4\)) s
402 413 M
(    s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
448.2 413 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
465 413 M
(][0]=np.array\([1,2,3,4],dtype=np.float32\)) s
402 405 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 405 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 405 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 405 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
460.8 405 M
(,s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
494.4 405 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
511.2 405 M
(]\)) s
402 389 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 389 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 389 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 389 M
("===Testing StateMuSigma===") s
/F-gs-font 7 7 SF
0 setgray
561.6 389 M
(\)) s
402 381 M
(    s = StateMuSigma\(4\)) s
402 373 M
(    s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
448.2 373 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
465 373 M
(][0]=np.array\([1,2,3,4],dtype=np.float32\)) s
402 365 M
(    s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
448.2 365 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
477.6 365 M
(]=np.eye\(4,dtype=np.float32\)) s
402 357 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 357 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 357 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 357 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
460.8 357 M
(, s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
498.6 357 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
515.4 357 M
(]\)) s
402 349 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 349 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 349 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 349 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
473.4 349 M
(, s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
511.2 349 M
("Sigma") s
/F-gs-font 7 7 SF
0 setgray
540.6 349 M
(]\)) s
402 333 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 333 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 333 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 333 M
("===Testing StateMuSigmaDiag===") s
/F-gs-font 7 7 SF
0 setgray
578.4 333 M
(\)) s
402 325 M
(    s = StateMuSigmaDiag\(4\)) s
402 317 M
(    s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
448.2 317 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
465 317 M
(][0]=np.array\([1,2,3,4],dtype=np.float32\)) s
402 309 M
(    s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
448.2 309 M
("sigma") s
/F-gs-font 7 7 SF
0 setgray
477.6 309 M
(][0]=np.array\([5,5,5,5],dtype=np.float32\)) s
402 301 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 301 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 301 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 301 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
460.8 301 M
(,s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
494.4 301 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
511.2 301 M
(]\)) s
402 293 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 293 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 293 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 293 M
("sigma") s
/F-gs-font 7 7 SF
0 setgray
473.4 293 M
(,s.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
507 293 M
("sigma") s
/F-gs-font 7 7 SF
0 setgray
536.4 293 M
(]\)) s
_R
S
%%Page: (1) 19
%%BeginPageSetup
_S
90 rotate
24 -571 translate
/pagenum 1 def
/fname (./matchernet_py_001/matchernet_null.py) def
/fdir (./matchernet_py_001) def
/ftail (matchernet_null.py) def
% User defined strings:
/pagenumstr (1) def
/moddatestr (10/17/18) def
/modtimestr (16:22:07) def
/user_header_p false def
/user_footer_p false def
%%EndPageSetup
column_lines
column_borders
do_header
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
5 501 M
(""") s
5 493 M
(matchernet.py) s
5 485 M
(=====) s
5 469 M
(This module contains a null demonstration of the BundleNet) s
5 453 M
(""") s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 445 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 445 M
( brica) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 437 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 437 M
( brica ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
51.2 437 M
(import) s
/F-gs-font 7 7 SF
0 setgray
76.4 437 M
( Component, VirtualTimeScheduler, Timing) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 429 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 429 M
( matchernet) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 421 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 421 M
( matchernet ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 421 M
(import) s
/F-gs-font 7 7 SF
0 setgray
97.4 421 M
( Bundle, Matcher) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 413 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 413 M
( numpy as np) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 405 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 405 M
( utils) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 397 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 397 M
( state) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 389 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 389 M
( time) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 381 M
(import) s
/F-gs-font 7 7 SF
0 setgray
30.2 381 M
( copy) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 373 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 373 M
( operator ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
63.8 373 M
(import) s
/F-gs-font 7 7 SF
0 setgray
89 373 M
( add) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 365 M
(from) s
/F-gs-font 7 7 SF
0 setgray
21.8 365 M
( functools ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
68 365 M
(import) s
/F-gs-font 7 7 SF
0 setgray
93.2 365 M
( reduce) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 341 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 341 M
( BundleNull\(Bundle\):) s
5 333 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 333 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 333 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 333 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 333 M
(\(self, name, n, delay=0\):) s
5 325 M
(        self.name = name) s
5 317 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 317 M
(# self.delay = delay) s
/F-gs-font 7 7 SF
0 setgray
5 309 M
(        self.delay = -1) s
5 301 M
(        self.state = state.StatePlain\(n\)) s
5 293 M
(        super\(BundleNull, self\).__init__\(self.name, self.state\)) s
5 277 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 277 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 277 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 277 M
(accept_feedback) s
/F-gs-font 7 7 SF
0 setgray
101.6 277 M
(\(self, fb_state\):) s
5 269 M
(        self.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
105.8 269 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
122.6 269 M
(] += fb_state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
202.4 269 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
219.2 269 M
(]) s
5 253 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 253 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 253 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 253 M
(update) s
/F-gs-font 7 7 SF
0 setgray
63.8 253 M
(\(self, inputs\):) s
5 245 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 245 M
(print) s
/F-gs-font 7 7 SF
0 setgray
59.6 245 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
63.8 245 M
("Updating {}") s
/F-gs-font 7 7 SF
0 setgray
118.4 245 M
(.format\(self.name\)\)) s
5 237 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 237 M
(#if\(self.delay\):) s
/F-gs-font 7 7 SF
0 setgray
5 229 M
(            ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
55.4 229 M
(# ref = time.clock_gettime\(time.CLOCK_MONOTONIC\)) s
/F-gs-font 7 7 SF
0 setgray
5 221 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 221 M
(#elapsed = 0) s
/F-gs-font 7 7 SF
0 setgray
5 213 M
(        ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
38.6 213 M
(#while elapsed < self.delay:) s
/F-gs-font 7 7 SF
0 setgray
5 205 M
(            ) s
/Courier-Oblique 7 7 SUF
0.698039 0.133333 0.133333 setrgbcolor
55.4 205 M
(# elapsed = time.clock_gettime\(time.CLOCK_MONOTONIC\) - ref) s
/F-gs-font 7 7 SF
0 setgray
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 189 M
(class) s
/F-gs-font 7 7 SF
0 setgray
26 189 M
( MatcherNull2\(Matcher\):) s
5 181 M
(    ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
21.8 181 M
('''MatcherNull is a Matcher that connects two BundleNull s''') s
/F-gs-font 7 7 SF
0 setgray
5 173 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 173 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 173 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 173 M
(__init__) s
/F-gs-font 7 7 SF
0 setgray
72.2 173 M
(\(self,name,b0,b1\):) s
5 165 M
(        self.name = name) s
5 157 M
(        super\(MatcherNull2, self\).__init__\(self.name, b0, b1\)) s
5 141 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
21.8 141 M
(def) s
/F-gs-font 7 7 SF
0 setgray
34.4 141 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
38.6 141 M
(update) s
/F-gs-font 7 7 SF
0 setgray
63.8 141 M
(\(self, inputs\):) s
5 133 M
(        mu = {}) s
5 125 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 125 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 125 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 125 M
(in) s
/F-gs-font 7 7 SF
0 setgray
80.6 125 M
( inputs:) s
5 117 M
(            mu[key] = inputs[key].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 117 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
185.6 117 M
(]) s
5 109 M
(        mean = reduce\(add, mu.values\(\)\) / len\(inputs\)) s
5 101 M
(        ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
38.6 101 M
(for) s
/F-gs-font 7 7 SF
0 setgray
51.2 101 M
( key ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
72.2 101 M
(in) s
/F-gs-font 7 7 SF
0 setgray
80.6 101 M
( inputs:) s
5 93 M
(            ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
55.4 93 M
(if) s
/F-gs-font 7 7 SF
0 setgray
63.8 93 M
( inputs[key] ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
118.4 93 M
(is) s
/F-gs-font 7 7 SF
0 setgray
126.8 93 M
( ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
131 93 M
(not) s
/F-gs-font 7 7 SF
0 setgray
143.6 93 M
( None:) s
5 85 M
(                self.results[key].data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
168.8 85 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
185.6 85 M
(] = \(mean - mu[key]\) * 0.1) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
5 53 M
(def) s
/F-gs-font 7 7 SF
0 setgray
17.6 53 M
( ) s
/Courier-Bold 7 7 SUF
0 0 1 setrgbcolor
21.8 53 M
(test_null) s
/F-gs-font 7 7 SF
0 setgray
59.6 53 M
(\(\):) s
5 45 M
(    b0   = BundleNull\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 45 M
("Bundle0") s
/F-gs-font 7 7 SF
0 setgray
135.2 45 M
(,4, 100\)) s
5 37 M
(    b1   = BundleNull\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 37 M
("Bundle1") s
/F-gs-font 7 7 SF
0 setgray
135.2 37 M
(,4, 200\)) s
5 29 M
(    b2   = BundleNull\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
97.4 29 M
("Bundle2") s
/F-gs-font 7 7 SF
0 setgray
135.2 29 M
(,4, 300\)) s
5 13 M
(    b0.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 13 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 13 M
(][0][1] = 1) s
5 5 M
(    b1.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
80.6 5 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
97.4 5 M
(][0][2] = 10) s
402 501 M
(    b2.state.data[) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
477.6 501 M
("mu") s
/F-gs-font 7 7 SF
0 setgray
494.4 501 M
(][0][3] = 100) s
402 485 M
(    m01 = MatcherNull2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
498.6 485 M
("Matcher01") s
/F-gs-font 7 7 SF
0 setgray
544.8 485 M
(,b0,b1\)) s
402 477 M
(    m02 = MatcherNull2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
498.6 477 M
("Matcher02") s
/F-gs-font 7 7 SF
0 setgray
544.8 477 M
(,b0,b2\)) s
402 469 M
(    m12 = MatcherNull2\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
498.6 469 M
("Matcher12") s
/F-gs-font 7 7 SF
0 setgray
544.8 469 M
(,b1,b2\)) s
402 453 M
(    s = VirtualTimeScheduler\(\)) s
402 445 M
(    bt = Timing\(0, 1, 1\)) s
402 437 M
(    bm = Timing\(1, 1, 1\)) s
402 421 M
(    s.add_component\(b0.component, bt\)) s
402 413 M
(    s.add_component\(b1.component, bt\)) s
402 405 M
(    s.add_component\(b2.component, bt\)) s
402 389 M
(    s.add_component\( m01.component, bm\)) s
402 381 M
(    s.add_component\( m02.component, bm\)) s
402 373 M
(    s.add_component\( m12.component, bm\)) s
402 357 M
(    s.step\(\)) s
402 349 M
(    s.step\(\)) s
402 341 M
(    s.step\(\)) s
402 333 M
(    s.step\(\)) s
402 317 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 317 M
(return) s
/F-gs-font 7 7 SF
0 setgray
444 317 M
( s) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
402 301 M
(if) s
/F-gs-font 7 7 SF
0 setgray
410.4 301 M
( __name__ == ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
465 301 M
('__main__') s
/F-gs-font 7 7 SF
0 setgray
507 301 M
(:) s
402 293 M
(    start = time.time\(\)) s
402 285 M
(    s = test_null\(\)) s
402 277 M
(    elapsed_time = time.time\(\) - start) s
402 269 M
(    ) s
/Courier-Bold 7 7 SUF
0.627451 0.12549 0.941176 setrgbcolor
418.8 269 M
(print) s
/F-gs-font 7 7 SF
0 setgray
439.8 269 M
(\() s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
444 269 M
("null -- elapsed_time:{0}") s
/F-gs-font 7 7 SF
0 setgray
553.2 269 M
(.format\(elapsed_time\) + ) s
/Courier-Bold 7 7 SUF
0.737255 0.560784 0.560784 setrgbcolor
654 269 M
("[sec]") s
/F-gs-font 7 7 SF
0 setgray
683.4 269 M
(\)) s
_R
S
%%Trailer
%%Pages: 19
%%DocumentNeededResources: font Times-Roman Courier-Oblique Courier-Bold 
%%+ font Courier Times-Bold 
%%EOF
